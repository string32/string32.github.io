<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JavaWeb jsp开发模型</title>
      <link href="/2021/12/20/javaweb/javaweb12/"/>
      <url>/2021/12/20/javaweb/javaweb12/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1.创建项目，编写JavaBean<br>（1）编写UserBean类<br>在Eclipse中创建一个名称为chapter11的Web项目，在项目的 src目录下创建包baixiao.model2.domain,在包中定义UserBean类，用于封装用户信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.model2.domain;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserBean</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2）编写RegisterFormBean类<br>在baixiao.model2.domain包中定义RegisterFormBean类,用于封装注册表单信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.model2.domain;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterFormBean</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> String password2;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> Map&lt;String, String&gt; errors = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword2</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword2</span><span class="params">(String password2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password2 = password2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">validate</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (name == <span class="keyword">null</span> || name.trim().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;请输入姓名.&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (password == <span class="keyword">null</span> || password.trim().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;请输入密码.&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (password.length() &gt; <span class="number">12</span> || password.length() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;请输入6-12个字符&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (password != <span class="keyword">null</span> &amp;&amp; !password.equals(password2)) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;password2&quot;</span>, <span class="string">&quot;两次输入的密码不匹配.&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对email格式的校验采用了正则表达式</span></span><br><span class="line"><span class="keyword">if</span> (email == <span class="keyword">null</span> || email.trim().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;请输入邮箱.&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (!email.matches(<span class="string">&quot;[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+&quot;</span>)) &#123;</span><br><span class="line">errors.put(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;邮箱格式错误&quot;</span>);</span><br><span class="line">flag = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//向Map集合errors中添加错误信息</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorMsg</span><span class="params">(String err, String errMsg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> ((err != <span class="keyword">null</span>) &amp;&amp; (errMsg != <span class="keyword">null</span>)) &#123;</span><br><span class="line">errors.put(err, errMsg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取errors集合</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getErrors</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> errors;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该JavaBean中除了定义了一些属性和成员变量外，还定义了3个方法。<br>其中，setErrorMsg(）方法用于向errors集合中存放错误信息，getErrors()方法用于获取封装错误信息的errors集合,<br>validlate()方法用于对注册表单内各字段所填写的数据进行校验。</p><p>2.创建工具类<br>在chapter11项目的src下创建包baixiao.model2.util,在包中定义DBUtil 类。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.model2.util;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.model2.domain.UserBean;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtil</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DBUtil instance = <span class="keyword">new</span> DBUtil();</span><br><span class="line"><span class="keyword">private</span> HashMap&lt;String, UserBean&gt; users = <span class="keyword">new</span> HashMap&lt;String, UserBean&gt;();</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">DBUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">UserBean user1 = <span class="keyword">new</span> UserBean();</span><br><span class="line">user1.setName(<span class="string">&quot;Pidan&quot;</span>);</span><br><span class="line">user1.setPassword(<span class="string">&quot;12345678&quot;</span>);</span><br><span class="line">user1.setEmail(<span class="string">&quot;Pidan@qq.com&quot;</span>);</span><br><span class="line">users.put(<span class="string">&quot;Pidan&quot;</span>, user1);</span><br><span class="line">UserBean user2 = <span class="keyword">new</span> UserBean();</span><br><span class="line">user2.setName(<span class="string">&quot;HYS&quot;</span>);</span><br><span class="line">user2.setPassword(<span class="string">&quot;abcdegfg&quot;</span>);</span><br><span class="line">user2.setEmail(<span class="string">&quot;HYS@qq.com&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DBUtil <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> UserBean <span class="title">getUser</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">UserBean user = (UserBean) users.get(userName);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">insertUser</span><span class="params">(UserBean user)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">String userName = user.getName();</span><br><span class="line"><span class="keyword">if</span> (users.get(userName) != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">users.put(userName, user);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义的DBUl是一个单例类，它实现了两个功能。第1个功能是定义一个HashMap集合users，用于模拟数据库，<br>并向数据库中存入了两条学生的信息。第2个功能是定义getUser()方法和insertUser()方法来操作数据库。其中，getUser()方法用于获取数据库中的用户信息，insertUser()方法用于向数据库中插入用户信息。需要注意的是，在insertUser()方法进行信息插入操作之前，会判断数据库中是否存在同名的学生信息。如果存在，则不执行插入操作，方法返回false；反之表示插入操作成功，方法返回 true。</p><p>3.创建Servlet<br>在chapter11项目下创建包pidan.model2.web,在包中定义ControllerServlet类，使用该类来处理用户请求</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.model2.web;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.model2.domain.RegisterFormBean;</span><br><span class="line"><span class="keyword">import</span> pidan.model2.domain.UserBean;</span><br><span class="line"><span class="keyword">import</span> pidan.model2.util.DBUtil;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/ControllerServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ControllerServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span>&#123;</span><br><span class="line"><span class="keyword">this</span>.doPost(request, response);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, </span></span></span><br><span class="line"><span class="params"><span class="function">HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException</span>&#123;</span><br><span class="line">response.setHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;text/html;charset=GBK&quot;</span>);</span><br><span class="line">response.setCharacterEncoding(<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line"></span><br><span class="line">String name = request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">String password2 = request.getParameter(<span class="string">&quot;password2&quot;</span>);</span><br><span class="line">String email = request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line"></span><br><span class="line">RegisterFormBean formBean = <span class="keyword">new</span> RegisterFormBean();</span><br><span class="line">formBean.setName(name);</span><br><span class="line">formBean.setPassword(password);</span><br><span class="line">formBean.setPassword2(password2);</span><br><span class="line">formBean.setEmail(email);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!formBean.validate()) &#123;</span><br><span class="line">request.setAttribute(<span class="string">&quot;formBean&quot;</span>, formBean);</span><br><span class="line">request.getRequestDispatcher(<span class="string">&quot;/register.jsp&quot;</span>).forward(request, response);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;!!!&quot;</span>);</span><br><span class="line">UserBean userBean = <span class="keyword">new</span> UserBean();</span><br><span class="line">userBean.setName(name);</span><br><span class="line">userBean.setPassword(password);</span><br><span class="line">userBean.setEmail(email);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b = DBUtil.getInstance().insertUser(userBean);</span><br><span class="line"><span class="keyword">if</span> (!b) &#123;</span><br><span class="line">request.setAttribute(<span class="string">&quot;DBMes&quot;</span>, <span class="string">&quot;你注册的用户已存在&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;formBean&quot;</span>, formBean);</span><br><span class="line">request.getRequestDispatcher(<span class="string">&quot;/register.jsp&quot;</span>).forward(request, response);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">response.getWriter().print(<span class="string">&quot;注册成功，3秒后自动跳转&quot;</span>);</span><br><span class="line"></span><br><span class="line">request.getSession().setAttribute(<span class="string">&quot;userBean&quot;</span>, userBean);</span><br><span class="line"></span><br><span class="line">response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3;url = loginSuccess.jsp&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建的RegisterFormBean对象用于封装表单提交的信息。当对RegisterFormBean对象进行校验时，如果校验失败，程序就会跳转到register.jsp注册页面，让用户重新填写注册信息。<br>如果校验通过，那么注册信息就会封装到UserBean对象中，并通过DBUtil的insertUser()方法将UserBean对象插入到数据库。<br>insertUser()方法有一个boolean类型的返回值，如果返回false，表示插入操作失败，程序跳转到register.jsp注册页面；反之，程序跳转到loginSuccess.jsp页面，表示用户登录成功。<br>需要注意的是，编写完ControllerServlet类之后，读者不要忘记在web.xml文件中配置其映射信息。</p><p>4.创建JSP页面<br>（1）编写register.jsp 文件<br>在项目的WebContent目录下创建register.jsp文件，该文件是用户注册的表单页面，用于接收用户的注册信息。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> pageEncoding=<span class="string">&quot;GBK&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 </span></span><br><span class="line"><span class="string">Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;用户注册&lt;/title&gt;</span><br><span class="line">    &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">        h3 &#123;</span><br><span class="line">        margin-left: 100px;</span><br><span class="line">        &#125;</span><br><span class="line">        #outer &#123;</span><br><span class="line">        width: 750px;</span><br><span class="line">        &#125;</span><br><span class="line">        span &#123;</span><br><span class="line">        color: #ff0000</span><br><span class="line">        &#125;</span><br><span class="line">        div &#123;</span><br><span class="line">             height:20px;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">        &#125;</span><br><span class="line">        .ch &#123;</span><br><span class="line">        width: 80px;</span><br><span class="line">        text-align: right;</span><br><span class="line">        <span class="keyword">float</span>: left;</span><br><span class="line">        &#125;</span><br><span class="line">        .ip &#123;</span><br><span class="line">        width: 500px;</span><br><span class="line">        <span class="keyword">float</span>: left</span><br><span class="line">        &#125;</span><br><span class="line">        .ip&gt;input &#123;</span><br><span class="line">        margin-right: 20px</span><br><span class="line">        &#125;</span><br><span class="line">        #bt &#123;</span><br><span class="line">        margin-left: 50px;</span><br><span class="line">        &#125;</span><br><span class="line">        #bt&gt;input &#123;</span><br><span class="line">        margin-right: 30px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;ControllerServlet&quot;</span> method=<span class="string">&quot;Post&quot;</span>&gt;</span><br><span class="line">    &lt;h3&gt;用户注册&lt;/h3&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;outer&quot;</span>&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ch&quot;</span>&gt;姓名:&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ip&quot;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;$&#123;formBean.name &#125;&quot;</span> /&gt;</span><br><span class="line">    &lt;span&gt;$&#123;formBean.errors.name&#125;$&#123;DBMes&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ch&quot;</span>&gt;密码:&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ip&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> /&gt;</span><br><span class="line">    &lt;span&gt;$&#123;formBean.errors.password&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ch&quot;</span>&gt;确认密码:&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ip&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password2&quot;</span> /&gt;</span><br><span class="line">    &lt;span&gt;$&#123;formBean.errors.password2&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ch&quot;</span>&gt;邮箱:&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ip&quot;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;email&quot;</span> value=<span class="string">&quot;$&#123;formBean.email &#125;&quot;</span> /&gt;</span><br><span class="line">    &lt;span&gt;$&#123;formBean.errors.email&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;bt&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;reset&quot;</span> value=<span class="string">&quot;重置 &quot;</span> /&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;注册&quot;</span> /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>(2)编写loginSuccess.jsp文件<br>在WebContent目录下创建loginSuccess.jsp文件，该文件是用户登录成功的页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> pageEncoding=<span class="string">&quot;GBK&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;pidan.model2.domain.UserBean&quot;</span>%&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 </span></span><br><span class="line"><span class="string">Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;login successfully&lt;/title&gt;</span><br><span class="line">    &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">        #main &#123;</span><br><span class="line">        width: 500px;</span><br><span class="line">        height: auto;</span><br><span class="line">        &#125;</span><br><span class="line">        #main div &#123;</span><br><span class="line">        width: 200px;</span><br><span class="line">        height: auto;</span><br><span class="line">        &#125;</span><br><span class="line">        ul &#123;</span><br><span class="line">        padding-top: 1px;</span><br><span class="line">        padding-left: 1px;</span><br><span class="line">        list-style: none;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;div id=<span class="string">&quot;main&quot;</span>&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;welcome&quot;</span>&gt;恭喜你，登录成功&lt;/div&gt;</span><br><span class="line">             &lt;hr /&gt;</span><br><span class="line">    &lt;div&gt;您的信息&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &lt;li&gt;您的姓名: $&#123;userBean.name &#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;您的邮箱:$&#123;userBean.email&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;您的邮箱:$&#123;userBean.password&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>5.运行程序，测试结果<br>将chapter11项目发布到Tomcat服务器，并启动服务器，<br>然后在浏览器地址栏中输入地址“<a href="http://localhost:8080/chapter11/register.jsp%E2%80%9D%E8%AE%BF%E9%97%AEregister.jsp%E9%A1%B5%E9%9D%A2%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%98%BE%E7%A4%BA%E7%BB%93%E6%9E%9C%E5%A6%82%E5%9B%BE">http://localhost:8080/chapter11/register.jsp”访问register.jsp页面，浏览器的显示结果如图</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb 数据库连接池与DBUtils工具</title>
      <link href="/2021/12/15/javaweb/javaweb11/"/>
      <url>/2021/12/15/javaweb/javaweb11/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>数据库连接池<br>DBCP数据源<br>DBCP是数据库连接池（DataBase Connection Pool）的简称，是Apache组织下的开源连接池实现，也是Tomcat服务器使用的连接池组件。单独使用DBCP数据源时，需要在应用程序<br>中导入两个JAR包，具体如下。<br>1.commons-dbcp.jar包<br>commons-dbcp.jar包是DBCP数据源的实现包，包含所有操作数据库连接信息和数据库连接池初始化信息的方法，并实现了DataSource接口的getConnection()方法。<br>2. commons-pool.jar包<br>   commons-pool.jar包是DBCP数据库连接池实现包的依赖包,为commons-dbcp.jar包中的方法提供了支持。可以这么说，没有该依赖包，commons-dbcp.jar包中的很多方法就没有办法实现。</p><p>1.在chapter13.example下创建一个Example01类:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter13.example;                                                                                                                                                                                                     </span><br><span class="line">                                                                                                                                                                                                                               </span><br><span class="line"><span class="keyword">import</span> java.awt.image.DataBufferShort;                                                                                                                                                                                         </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;                                                                                                                                                                                                  </span><br><span class="line">                                                                                                                                                                                                                               </span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;                                                                                                                                                                                                   </span><br><span class="line">                                                                                                                                                                                                                               </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSource;                                                                                                                                                                                </span><br><span class="line">                                                                                                                                                                                                                               </span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;                                                                                                                                                                                              </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;                                                                                                                                                                                                    </span><br><span class="line">                                                                                                                                                                                                                               </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">example01</span> </span>&#123;                                                                                                                                                                                                       </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;                                                                                                                                                                                        </span><br><span class="line"><span class="keyword">static</span> &#123;                                                                                                                                                                                                                   </span><br><span class="line">BasicDataSource bds = <span class="keyword">new</span> BasicDataSource();                                                                                                                                                                           </span><br><span class="line">bds.setDriverClassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);                                                                                                                                                                    </span><br><span class="line">bds.setUrl( <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?serverTimezone=UTC&quot;</span>);                                                                                                                                                    </span><br><span class="line">bds.setUsername(<span class="string">&quot;root&quot;</span>);                                                                                                                                                                                               </span><br><span class="line">bds.setPassword(<span class="string">&quot;123456&quot;</span>);                                                                                                                                                                                             </span><br><span class="line">bds.setInitialSize(<span class="number">5</span>);                                                                                                                                                                                                 </span><br><span class="line">bds.setMaxActive(<span class="number">5</span>);                                                                                                                                                                                                   </span><br><span class="line">ds = bds;                                                                                                                                                                                                              </span><br><span class="line">&#125;                                                                                                                                                                                                                          </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;                                                                                                                                                                </span><br><span class="line">Connection conn =ds.getConnection();                                                                                                                                                                                   </span><br><span class="line">DatabaseMetaData metaData = conn.getMetaData();                                                                                                                                                                        </span><br><span class="line">System.out.println(metaData.getURL()+<span class="string">&quot;UserName=&quot;</span>+metaData.getUserName()+<span class="string">&quot;,&quot;</span>+metaData.getDriverName());                                                                                                                 </span><br><span class="line">&#125;                                                                                                                                                                                                                          </span><br><span class="line">&#125;                                                                                                                                                                                                                              </span><br></pre></td></tr></table></figure><p>通过读取配置文件创建数据源对象<br>除了使用BasicDataSource 直接创建数据源对象外，还可以使用BasicDataSourceFactory工厂类读取配置文件，创建数据源对象，然后获取数据库连接对象。<br>（1）在chapter10项目的src目录下创建dbcpconfig.properties文件，该文件用于设置数据库的连接信息和数据源的初始化信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbc</span></span><br><span class="line">username=root</span><br><span class="line">password=<span class="number">123456</span></span><br><span class="line"> </span><br><span class="line">initialSize=<span class="number">5</span></span><br><span class="line"> </span><br><span class="line">maxActive=<span class="number">10</span></span><br><span class="line"> </span><br><span class="line">maxIdle=<span class="number">10</span></span><br></pre></td></tr></table></figure><p>(2）在pidan.example包下创建一个Example02类，该类中采用了从配置文件中获取数据库的连接信息和数据源的初始化信息的方式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example02</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource ds= <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">InputStream in = <span class="keyword">new</span> Example02().getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;dbcpconfig.properties&quot;</span>);</span><br><span class="line">prop.load(in);</span><br><span class="line">ds = BasicDataSourceFactory.createDataSource(prop);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">Connection conn = ds.getConnection();</span><br><span class="line"></span><br><span class="line">DatabaseMetaData metaData = conn.getMetaData();</span><br><span class="line"></span><br><span class="line">System.out.println(metaData.getURL()</span><br><span class="line">+<span class="string">&quot;,UserName=&quot;</span> + metaData.getUserName()</span><br><span class="line">+<span class="string">&quot;,&quot;</span>+metaData.getDriverName());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过 ComboPooledDataSource()构造方法创建数据源对象<br>（1）在项目chapter10中导入JAR包c3p0-0.9.1.2.jar,然后在cn.itcast.chapter10.example<br>包下创建一个Example03类，该类采用C3PO数据源手动代码的方式获取Connection对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">**<span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example03</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource ds= <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">ComboPooledDataSource cpds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">cpds.setDriverClass(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">cpds.setJdbcUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>);</span><br><span class="line">cpds.setUser(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">cpds.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">cpds.setInitialPoolSize(<span class="number">5</span>);</span><br><span class="line">cpds.setMaxPoolSize(<span class="number">15</span>);</span><br><span class="line">ds = cpds;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> ExceptionInInitializerError(e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">System.out.println(ds.getConnection());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过读取配置文件创建数据源对象<br>使用 ComboPooledDataSource（String configName）构造方法读取c3p0-config.xml配<br>置文件，从而创建数据源对象，然后获取数据库连接对象。<br>（1）在src根目录下创建一个c3p0-config.xml文件，用于设置数据库的连接信息和数据源的初始化信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">&lt;<span class="keyword">default</span>-config&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;driverClass&quot;</span>&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span><br><span class="line">     jdbc:mysql:<span class="comment">//localhost:3306/jdbc</span></span><br><span class="line">     &lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;user&quot;</span>&gt;root&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;password&quot;</span>&gt;<span class="number">123456</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;<span class="number">30000</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;initialPoolSize&quot;</span>&gt;<span class="number">10</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;maxIdleTime&quot;</span>&gt;<span class="number">30</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;maxPoolSize&quot;</span>&gt;<span class="number">100</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;minPoolSize&quot;</span>&gt;<span class="number">10</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;maxStatements&quot;</span>&gt;<span class="number">200</span>&lt;/property&gt;</span><br><span class="line">&lt;/<span class="keyword">default</span>-config&gt; </span><br><span class="line">&lt;named-config name=<span class="string">&quot;pidan&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;driverClass&quot;</span>&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span><br><span class="line">           jdbc:mysql:<span class="comment">//localhost:3306/jdbc</span></span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;user&quot;</span>&gt;root&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;password&quot;</span>&gt;<span class="number">123456</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;initialPoolSize&quot;</span>&gt;<span class="number">5</span>&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;maxPoolSize&quot;</span>&gt;<span class="number">15</span>&lt;/property&gt;</span><br><span class="line">&lt;/named-config&gt;</span><br><span class="line">&lt;/c3p0-config&gt;</span><br></pre></td></tr></table></figure><p>c3p0-config.xml 配置了两套数据源,<default-config>.…</default-config>中的信息是默认配置，在没有指定配置时默认使用该配置创建C3p0数据源对象；<named-config>…&lt;/ named-config &gt;中的信息是自定义配置，<br>一个配置文件中可以有零个或多个自定义配置，当用户需要使用自定义配置时，调用ComboPooledDataSource(String configName)方法，传入<named-config>节点中name属性的值即可创建C3PO数据源对象。这种设置的好处是，当程序在后期更换数据源配置时，只需要修改构造方法中对应的name值即可。<br>(2)在pidan.example包下创建一个Example04类，该类中使用C3P0数据源从配置文件中获取Connection对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example04</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource ds= <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">ComboPooledDataSource cpds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;pidan&quot;</span>);</span><br><span class="line">ds = cpds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">System.out.println(ds.getConnection());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="DBUtils-工具"><a href="#DBUtils-工具" class="headerlink" title="DBUtils 工具"></a>DBUtils 工具</h1><ol><li>BeanHandler 和 BeanListHandler<br>BeanHandler和BeanListHandler实现类是将结果集中的数据封装到对应的JavaBean实例中，这也是实际开发中最常用的结果集处理方法。</li></ol><p>（1）在名为jdbc的数据库中创建数据表user，创建语句如下。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USE jdbc;</span><br><span class="line"><span class="function">CREATE TABLE <span class="title">user</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">id INT(<span class="number">3</span>)</span> PRIMARY KEY AUTO_INCREMENT,</span></span><br><span class="line"><span class="function">name <span class="title">VARCHAR</span><span class="params">(<span class="number">20</span>)</span> NOT NULL,</span></span><br><span class="line"><span class="function">password <span class="title">VARCHAR</span><span class="params">(<span class="number">20</span>)</span> NOT NULL</span></span><br><span class="line"><span class="function">)</span>;</span><br></pre></td></tr></table></figure><p>向user表插入3条数据，具体语句如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">INSERT INTO <span class="title">user</span> <span class="params">(name, password)</span> <span class="title">VALUES</span> <span class="params">(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span></span>;</span><br><span class="line"><span class="function">INSERT INTO <span class="title">user</span> <span class="params">(name, password)</span> <span class="title">VALUES</span> <span class="params">(<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span></span>;</span><br><span class="line"><span class="function">INSERT INTO <span class="title">user</span> <span class="params">(name, password)</span> <span class="title">VALUES</span> <span class="params">(<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>（2）将下载的DBUtils 工具的JAR包commons-dbutils-1.6.jar添加到项目的 lib目录中，并将第9章中文件JDBCUtils.java复制到pidan.example包下。</p><p>（3）在chapter10项目的pidan.example包中创建一个名为BaseDao的类，该类中编写了一个通用的查询方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.ResultSetHandler;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDao</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">query</span><span class="params">(String sql,ResultSetHandler&lt;?&gt; rsh,Object... params)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">Object obj = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = JDBCUtils.getConnection();</span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; params != <span class="keyword">null</span> &amp;&amp; i &lt; params.length; i++) &#123;</span><br><span class="line">pstmt.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">&#125;</span><br><span class="line">rs = pstmt.executeQuery();</span><br><span class="line">obj = rsh.handle(rs);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Exception(e.getMessage());</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs, pstmt,conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line">&#125;****</span><br></pre></td></tr></table></figure><p>（4）在pidan.example包下创建实体类User,使用该类来封装User对象(建议自己getset)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"><span class="keyword">private</span> String name,password;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（5）在 pidan.example包下创建类ResultSetTest1,该类用于演示BeanHandler类对结果集的处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSetTest1</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testBeanHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">BaseDao baseDao = <span class="keyword">new</span> BaseDao();</span><br><span class="line">String sql = <span class="string">&quot;select * from user where id=?&quot;</span>;</span><br><span class="line">Object object = baseDao.query(sql, <span class="keyword">new</span> BeanHandler(User.class), <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (object!=<span class="keyword">null</span> &amp;&amp; object <span class="keyword">instanceof</span> User) &#123;</span><br><span class="line">User user = (User) object;</span><br><span class="line">System.out.println(<span class="string">&quot;id=1的User对象的name值为：&quot;</span>+ user.getName());</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;查询结果为空：&quot;</span>+object);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testBeanHandler();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(7）在pidan.example包下创建类ResultSetTest2,该类用于演示BeanListHandler类对结果集的处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSetTest2</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testBeanHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">BaseDao basedao = <span class="keyword">new</span> BaseDao();</span><br><span class="line">String sql = <span class="string">&quot;select * from user &quot;</span>;</span><br><span class="line">ArrayList&lt;User&gt; list = (ArrayList&lt;User&gt;) basedao.query(sql, <span class="keyword">new</span> BeanListHandler(User.class));</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;第&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;条数据的username值为:&quot;</span></span><br><span class="line">+ list.get(i).getName());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testBeanHandler();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（8）执行类ResultSetTest2中的main()方法</p><ol start="2"><li>ScalarHandler<br>在使用DBUtils工具操作数据库时，如果需要输出结果集中一行数据的指定字段值，可以使用ScalarHandler类。<br>（1）在 baixiao.example 包下创建类 ResultSetTest3,该类用于演示 ScalarHandler类的使用方法<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSetTest3</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testBeanHandler</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">BaseDao baseDao = <span class="keyword">new</span> BaseDao();</span><br><span class="line">String sql = <span class="string">&quot;select * from user where id=?&quot;</span>;</span><br><span class="line">Object arr = (Object) BaseDao.query(sql, <span class="keyword">new</span> ScalarHandler(<span class="string">&quot;name&quot;</span>), <span class="number">1</span>);</span><br><span class="line">System.out.println(arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testBeanHandler();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>创建DBUtilsDao类<br>在项目chapter10的src目录下，创建一个名为pidan.jdbc.demo的包，然后在该包下创建一个DBUtilsDao类，该类实现了对user表增删改查的基本操作。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.demo;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.example.User;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.utils.C3p0Utils;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDao</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">QueryRunner runner = <span class="keyword">new</span> QueryRunner(C3p0Utils.getDataSource());</span><br><span class="line"></span><br><span class="line">String sql = <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">List list = (List) runner.query(sql, <span class="keyword">new</span> BeanListHandler(User.class));</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">find</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">QueryRunner runner = <span class="keyword">new</span> QueryRunner(C3p0Utils.getDataSource());</span><br><span class="line">String sql = <span class="string">&quot;select * from user where id=?&quot;</span>;</span><br><span class="line">User user = (User) runner.query(sql, <span class="keyword">new</span> BeanHandler(User.class),<span class="keyword">new</span> Object[] &#123; id &#125;);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">insert</span><span class="params">(User user)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">QueryRunner runner = <span class="keyword">new</span> QueryRunner(C3p0Utils.getDataSource());</span><br><span class="line">String sql = <span class="string">&quot;insert into user (name,password) values (?,?)&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = runner.update(sql,<span class="keyword">new</span> Object[] &#123;user.getName(),user.getPassword()&#125;);</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">updata</span><span class="params">(User user)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">QueryRunner runner = <span class="keyword">new</span> QueryRunner(C3p0Utils.getDataSource());</span><br><span class="line">String sql = <span class="string">&quot;update user set name=?,password=? where id=?&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = runner.update(sql,<span class="keyword">new</span> Object[] &#123;user.getName(),user.getPassword(),user.getId()&#125;);</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">QueryRunner runner = <span class="keyword">new</span> QueryRunner(C3p0Utils.getDataSource());</span><br><span class="line">String sql = <span class="string">&quot;delete from user where id=?&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = runner.update(sql,id);</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>上述代码中，使用了QueryRunner类中带参的方法，将数据源传给QueryRunner对象，并使用QuervRunner对象创建和关闭了数据库连接。<br>这样，就实现了用DBUtils工具对数据库的基本操作。需要注意的是，在查询方法中，用到了 BeanHandler和BeanListHandler实现类来处理结果集，<br>查询一条数据用的是能够处理一行数据的BeanHandler类，查询所有数据时用的是能处理所有行数据的BeanListHandler类，切勿错误使用，否则会造成程序报错。</li></ol><p>3.测试DBUtilsDao类中的增删改查操作<br>（1）增加数据。在 baixiao.jdbc.demo包中创建类DBUtilsDaoTest1对增加操作进行测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.demo;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.example.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDaoTest1</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DBUtilsDao dao = <span class="keyword">new</span> DBUtilsDao();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setName(<span class="string">&quot;zhaoliu&quot;</span>);</span><br><span class="line">user.setPassword(<span class="string">&quot;666666&quot;</span>);</span><br><span class="line"><span class="keyword">boolean</span> b = dao.insert(user);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testInsert();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）修改数据。在baixiao.jdbc.demo包下创建测试类DBUtilsDaoTest2。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.demo;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.example.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDaoTest2</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DBUtilsDao dao = <span class="keyword">new</span> DBUtilsDao();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testupdate</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setName(<span class="string">&quot;zhaoliou&quot;</span>);</span><br><span class="line">user.setPassword(<span class="string">&quot;666777&quot;</span>);</span><br><span class="line">user.setId(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">boolean</span> b = dao.updata(user);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testupdate();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（3）删除数据。在baixiao.jdbc.demo包下创建测试类DBUtilsDaoTest3</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.demo;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.example.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDaoTest3</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DBUtilsDao dao = <span class="keyword">new</span> DBUtilsDao();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testupdate</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b = dao.delete(<span class="number">4</span>);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testupdate();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（4）查询数据。在baixiao.jdbc.demo包下创建测试类DBUtilsDaoTest4</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> baixiao.jdbc.demo;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.example.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDaoTest4</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DBUtilsDao dao = <span class="keyword">new</span> DBUtilsDao();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testfind</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">User user = dao.find(<span class="number">2</span>);</span><br><span class="line">System.out.println(user.getId() +<span class="string">&quot;,&quot;</span>+user.getName()+<span class="string">&quot;,&quot;</span>+user.getPassword());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">testfind();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>android学习</title>
      <link href="/2021/11/26/android%20app%E5%AD%A6%E4%B9%A0/android%20%E5%BC%80%E5%8F%91/"/>
      <url>/2021/11/26/android%20app%E5%AD%A6%E4%B9%A0/android%20%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>#1.控件</p><p> 1.1 TextView<br>基础属性：<br><img src="C:\Users\systen\AppData\Roaming\Typora\typora-user-images\image-20211201091134013.png" alt="image-20211201091134013"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line"></span><br><span class="line">    android:text=&quot;@string/tv_one&quot;   //设置文本</span><br><span class="line">    android:textColor=&quot;@color/black&quot;  //设置字体颜色</span><br><span class="line">    android:textStyle=&quot;italic&quot;    //设置字体样式</span><br><span class="line">    android:textSize=&quot;30sp&quot;       //设置字体大小</span><br><span class="line">    android:background=&quot;@color/red&quot;</span><br><span class="line">    android:gravity=&quot;center&quot;       //设置文本位置</span><br><span class="line">    android:id=&quot;@+id/tv_one&quot;       //设置id</span><br><span class="line">    android:layout_width=&quot;200dp&quot;</span><br><span class="line">    android:layout_height=&quot;200dp&quot;</span><br><span class="line"></span><br><span class="line">    &gt;&lt;/TextView&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1.2 带阴影的TextView<br><img src="C:\Users\systen\AppData\Roaming\Typora\typora-user-images\image-20211201102222982.png" alt="image-20211201102222982"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">android:shadowColor=<span class="string">&quot;@color/red&quot;</span></span><br><span class="line">android:shadowRadius=<span class="string">&quot;3.0&quot;</span></span><br><span class="line">android:shadowDx=<span class="string">&quot;10.0&quot;</span></span><br></pre></td></tr></table></figure><p>1.3 跑马灯效果</p><p><img src="C:\Users\systen\AppData\Roaming\Typora\typora-user-images\image-20211201102435535.png" alt="image-20211201102435535"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> android:singleLine=<span class="string">&quot;true&quot;</span></span><br><span class="line">    android:ellipsize=<span class="string">&quot;marquee&quot;</span></span><br><span class="line">    android:marqueeRepeatLimit=<span class="string">&quot;marquee_forever&quot;</span></span><br><span class="line">    android:focusable=<span class="string">&quot;true&quot;</span></span><br><span class="line">    android:focusableInTouchMode=<span class="string">&quot;true&quot;</span></span><br><span class="line">    android:clickable=<span class="string">&quot;true&quot;</span></span><br><span class="line">        </span><br><span class="line">&lt;requestFocus/&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb JDBC</title>
      <link href="/2021/11/26/javaweb/javaweb%2010/"/>
      <url>/2021/11/26/javaweb/javaweb%2010/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>实现第一个JDBC程序<br>1.搭建数据库环境<br>在MySQL中创建一个名称为jdbc的数据库，然后在该数据库中创建一个users表，创建<br>数据库和表的SQL语句如下所示。\</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE jdbc;</span><br><span class="line">USE jdbc;</span><br><span class="line"></span><br><span class="line"><span class="function">CREATE TABLE <span class="title">users</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  id INT PRIMARY KEY AUTO_INCREMENT,</span></span></span><br><span class="line"><span class="params"><span class="function">  name VARCHAR(<span class="number">40</span>)</span>,</span></span><br><span class="line"><span class="function">  password <span class="title">VARCHAR</span><span class="params">(<span class="number">40</span>)</span>,</span></span><br><span class="line"><span class="function">  email <span class="title">VARCHAR</span><span class="params">(<span class="number">60</span>)</span>,</span></span><br><span class="line"><span class="function">  birthday DATE</span></span><br><span class="line"><span class="function">  )CHARACTER SET utf8 COLLATE utf8_general_ci</span>;</span><br></pre></td></tr></table></figure><p>数据库和表创建成功后，再向users表中插入3条数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">INSERT INTO <span class="title">users</span> <span class="params">(NAME, PASSWORD, email, birthday)</span></span></span><br><span class="line"><span class="function"><span class="title">VALUES</span><span class="params">(<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;zs@sina.com&#x27;</span>,<span class="string">&#x27;1980-12-04&#x27;</span>)</span></span>;</span><br><span class="line"><span class="function">INSERT INTO <span class="title">users</span> <span class="params">(NAME, PASSWORD, email,birthday)</span></span></span><br><span class="line"><span class="function"><span class="title">VALUES</span><span class="params">(<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;lisi0sina.com&#x27;</span>,<span class="string">&#x27;1981-12-04&#x27;</span>)</span></span>;</span><br><span class="line"><span class="function">INSERT INTO <span class="title">users</span> <span class="params">(NAME, PASSWORD, email,birthday)</span></span></span><br><span class="line"><span class="function"><span class="title">VALUES</span><span class="params">(<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;wangwu@sina.com&#x27;</span>,<span class="string">&#x27;1979-12-04&#x27;</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>2.创建项目环境，导入数据库驱动<br>在Eclipse中新建一个名称为chapter09的Web项目，将MySQL的数据库驱动文件mysql-connector-java-5.1.13-bin.jar复制到项目的lib目录中，<br>并发布到类路径下（MysQL驱动文件可以在其官网地址：<a href="http://dev.mysql.com/downloads/connector/j/%E9%A1%B5%E9%9D%A2%E4%B8%AD%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E8%BE%93%E5%85%A5%E8%AF%A5%E5%9C%B0%E5%9D%80%E5%90%8E%E5%8D%B3%E5%8F%AF%E8%BF%9B%E5%85%A5%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2%EF%BC%8C">http://dev.mysql.com/downloads/connector/j/页面中下载，在浏览器中输入该地址后即可进入下载页面，</a><br>单击页面Generally Available（GA）Releases窗口中的Looking for previous GA versions 超链接后，在显示出的下拉框中下载所需的驱动版本即可)。</p><p>3.编写JDBC程序<br>在项目chapter09的src目录下，新建一个名称为pidan.jdbc.example的包，<br>在该包中创建类Example01，该类用于读取数据库中的users表，并将结果输出到控制台</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example01</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">Statement stmt=<span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">String url=<span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">conn = DriverManager.getConnection(url,username,password); </span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;select * from users&quot;</span>;</span><br><span class="line">rs= stmt.executeQuery(sql);</span><br><span class="line">System.out.println(<span class="string">&quot;id\t |name |password\t |email\t |birthday&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line"><span class="keyword">int</span> id = rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">String name = rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">String psw = rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">String email = rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">Date birthday =rs.getDate(<span class="string">&quot;birthday&quot;</span>);</span><br><span class="line">System.out.println(id + <span class="string">&quot;\t |&quot;</span> + name + <span class="string">&quot;\t |&quot;</span>+ psw + <span class="string">&quot;\t |&quot;</span> + email +<span class="string">&quot;\t |&quot;</span> +birthday);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(rs!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">rs = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(stmt!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">stmt=<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(conn!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">conn=<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先注册了MySQL数据库驱动，通过DriverManager获取一个Connection对象,<br>然后使用Connection对象创建一个Statement对象，Statement对象通过executeQuery()方法执行SQL语句，<br>并返回结果集ResultSet。接下来，通过遍历ResultSet得到最终的查询结果，最后关闭连接，回收了数据库资源。</p><p>在chapter09项目的pidan.jdbc.example包中创建一个名称为Example02的类，<br>在该类中使用PreparedStatement对象对数据库进行插入数据的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example02</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">PreparedStatement preStmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">conn = DriverManager.getConnection(url,username,password); </span><br><span class="line">String sql =<span class="string">&quot;INSERT INTO users (NAME, PASSWORD, email,birthday)&quot;</span>+<span class="string">&quot;VALUES(?,?,?,?)&quot;</span>;</span><br><span class="line">preStmt =conn.prepareStatement(sql);</span><br><span class="line">preStmt.setString(<span class="number">1</span>, <span class="string">&quot;zl&quot;</span>);</span><br><span class="line">preStmt.setString(<span class="number">2</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">preStmt.setString(<span class="number">3</span>, <span class="string">&quot;zl@sina.com&quot;</span>);</span><br><span class="line">preStmt.setString(<span class="number">4</span>, <span class="string">&quot;1789-12-23&quot;</span>);</span><br><span class="line">preStmt.executeUpdate();</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(preStmt!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">preStmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">preStmt = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(conn!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">conn=<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先通过Connection对象的prepareStatement()方法生成PreparedStatement对象，<br>然后调用PreparedStatement对象的setXxx()方法，给SQL语句中的参数赋值，<br>最后通过调用executeUpdate()方法执行SQL语句。运行成功后，会在users表中插入一条数据。</p><p>ResultSet对象<br>在chapter09项目的baixiao.jdbc.example包中创建一个名称为Example03的类,<br>该类中使用ResultSet对象取出指定数据的信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example03</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">conn = DriverManager.getConnection(url,username,password);</span><br><span class="line">String sql = <span class="string">&quot;select * from users&quot;</span>;</span><br><span class="line">stmt = conn.createStatement(</span><br><span class="line">ResultSet.TYPE_SCROLL_INSENSITIVE,</span><br><span class="line">ResultSet.CONCUR_READ_ONLY);</span><br><span class="line">ResultSet rs = stmt.executeQuery(sql);</span><br><span class="line">System.out.print(<span class="string">&quot;第2条数据的name值为：&quot;</span>);</span><br><span class="line">rs.absolute(<span class="number">2</span>);</span><br><span class="line">System.out.println(rs.getNString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">System.out.print(<span class="string">&quot;第1条数据的name值为：&quot;</span>);</span><br><span class="line">rs.beforeFirst();  <span class="comment">//将指针定位到结果集中第一行数据之前</span></span><br><span class="line">rs.next();<span class="comment">//指针向后滚动</span></span><br><span class="line">System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">System.out.print(<span class="string">&quot;第4条数据的name值为：&quot;</span>);</span><br><span class="line">rs.afterLast(); <span class="comment">//将指针定位到结果集中最后一条数据之后</span></span><br><span class="line">rs.previous();<span class="comment">//指针向前滚动</span></span><br><span class="line">System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(stmt!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">stmt = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(conn!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">conn=<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先获取Connection对象连接数据库，然后通过Connection对象创建Statement对象并设置所需的两个常量，<br>接下来执行SQL语句，将获取的数据信息存放在ResultSet中 ，最后通过ResultSet对象的absolute()方法取出ResultSet中指定数据的信息并输出。</p><p>【任务】使用JDBC完成数据的增删改查<br>1.创建JavaBean<br>在chapter09项目的src目录下,创建包baixiao.jdbc.example.domain,并在该包下创建一个用于保存用户数据的User类，User类的具体实现方式如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example.domain;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> Date birthday;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.username = username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> birthday;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.创建工具类<br>由于每次操作数据库时，都需要加载数据库驱动、建立数据库连接以及关闭数据库连接，为了避免代码的重复书写，下面建立一个专门用于数据库相关操作的工具类。<br>在src下新建一个包baixiao.jdbc.example.utils,在包中创建一个封装了上述操作的工具类JDBCUtils，JDBCUtils的具体实现方式如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pidan.jdbc.example.utils;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException,ClassNotFoundException</span>&#123;</span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">Connection conn = DriverManager.getConnection(url,username,password);</span><br><span class="line"><span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Statement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(stmt!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">stmt = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(conn!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">conn=<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(ResultSet rs,Statement stmt,Connection conn)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rs!=<span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">rs = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">release(stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.创建DAO<br>在src下新建一个名称为baixiao.jdbc.example.dao的包，在包中创建一个名称为UsersDao的类，该类中封装了对表users的添加、查询、删除和更新等操作，具体实现方式如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example.dao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.utils.JDBCUtils;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersDao</span> </span>&#123;</span><br><span class="line"><span class="comment">//添加用户的操作</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">insert</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt=<span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = JDBCUtils.getConnection();</span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">String birthday = sdf.format(user.getBirthday());</span><br><span class="line">String sql = <span class="string">&quot;INSERT INTO users(id,name,password,email,birthday)&quot;</span>+</span><br><span class="line"><span class="string">&quot;VALUES(&quot;</span></span><br><span class="line">+user.getId()</span><br><span class="line">+<span class="string">&quot;,&#x27;&quot;</span></span><br><span class="line">+user.getUsername()</span><br><span class="line">+<span class="string">&quot;&#x27;,&#x27;&quot;</span></span><br><span class="line">+user.getPassword()</span><br><span class="line">+<span class="string">&quot;&#x27;,&#x27;&quot;</span></span><br><span class="line">+user.getEmail()</span><br><span class="line">+<span class="string">&quot;&#x27;,&#x27;&quot;</span></span><br><span class="line">+birthday + <span class="string">&quot;&#x27;)&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = stmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs,stmt,conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt=<span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">ArrayList&lt;User&gt; list = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = JDBCUtils.getConnection();</span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line">rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">user.setUsername(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">user.setEmail(rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">user.setBirthday(rs.getDate(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">list.add(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs, stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">find</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">Connection conn=<span class="keyword">null</span>;</span><br><span class="line">Statement stmt=<span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = JDBCUtils.getConnection();</span><br><span class="line">stmt=conn.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;SELECT * FROM users WHERE id=&quot;</span> + id;</span><br><span class="line">rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">user.setUsername(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">user.setEmail(rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">user.setBirthday(rs.getDate(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs,stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = JDBCUtils.getConnection();</span><br><span class="line">stmt= conn.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;DELETE FROM users WHERE id=&quot;</span> + id;</span><br><span class="line"><span class="keyword">int</span> num =stmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs, stmt,conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">Connection conn =<span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn= JDBCUtils.getConnection();</span><br><span class="line">stmt = conn.createStatement();</span><br><span class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">String birthday =sdf.format(user.getBirthday());</span><br><span class="line">String sql = <span class="string">&quot;UPDATE users set name=&#x27;&quot;</span>+user.getUsername()</span><br><span class="line">+<span class="string">&quot;&#x27;,password=&#x27;&quot;</span>+user.getPassword() + <span class="string">&quot;&#x27;,email=&#x27;&quot;</span></span><br><span class="line">+user.getEmail() + <span class="string">&quot;&#x27;,birthday=&#x27;&quot;</span> + birthday</span><br><span class="line">+<span class="string">&quot;&#x27;WHERE id=&quot;</span> + user.getId();</span><br><span class="line"><span class="keyword">int</span> num = stmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">JDBCUtils.release(rs, stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.创建测试类<br>（1）在baixiao.jdbc.example包中编写测试类JdbclnsertTest,实现向 users表中添加数据的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.domain.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcInsertTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//向users表插入一个用户信息</span></span><br><span class="line">UsersDao ud = <span class="keyword">new</span> UsersDao();</span><br><span class="line">User user=<span class="keyword">new</span> User();</span><br><span class="line">user.setId(<span class="number">5</span>);</span><br><span class="line">user.setUsername(<span class="string">&quot;hl&quot;</span>);</span><br><span class="line">user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">user.setEmail(<span class="string">&quot;hl@sina.com&quot;</span>);</span><br><span class="line">user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line"><span class="keyword">boolean</span> b= ud.insert(user);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在baixiao.jdbc.example包中编写测试类FindAllUsersTest,该类用于实现读取users表中所有的数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.domain.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinddAllUsersTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">UsersDao usersDao = <span class="keyword">new</span> UsersDao();</span><br><span class="line">ArrayList&lt;User&gt; list = usersDao.findAll();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt; list.size(); i++) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;第&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;条数据的username的值为：&quot;</span></span><br><span class="line">+list.get(i).getUsername());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在baixiao.jdbc.example包中编写测试类FindUserByldTest,在该类中实现读取 users表中指定的数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.domain.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindUserByldTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">UsersDao usersDao = <span class="keyword">new</span> UsersDao();</span><br><span class="line">User user = usersDao.find(<span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;id为1的User对象的name值为：&quot;</span>+user.getUsername());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在baixiao.jdbc.example包中编写测试类UpdateUserTest,在该类中实现修改users表中数据的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.domain.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateUserTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">UsersDao usersDao = <span class="keyword">new</span> UsersDao();</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setId(<span class="number">4</span>);</span><br><span class="line">user.setUsername(<span class="string">&quot;zhaoxiaoliu&quot;</span>);</span><br><span class="line">user.setPassword(<span class="string">&quot;456&quot;</span>);</span><br><span class="line">user.setEmail(<span class="string">&quot;zhaoxiaoliu@sina.com&quot;</span>);</span><br><span class="line">user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line"><span class="keyword">boolean</span> b=usersDao.update(user);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;****</span><br></pre></td></tr></table></figure><p>在baixiao.jdbc.example包中编写测试类DeleteUserTest,该类实现了删除users 表中数据的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.jdbc.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pidan.jdbc.example.dao.UsersDao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeleteUserTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">UsersDao usersDao = <span class="keyword">new</span> UsersDao();</span><br><span class="line"><span class="keyword">boolean</span> b = usersDao.delete(<span class="number">4</span>);</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb Listener 监听器</title>
      <link href="/2021/11/26/javaweb/JavaWeb%2009/"/>
      <url>/2021/11/26/javaweb/JavaWeb%2009/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-创建监听器："><a href="#1-创建监听器：" class="headerlink" title="1.创建监听器："></a>1.创建监听器：</h1><p>在chepter11创建一个chapter11.listener包,编写一个mylistener类,用来实现若干个监听器接口</p><pre><code>                            mylistener.java</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter11.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Application Lifecycle Listener implementation class mylistener</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mylistener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span>, <span class="title">HttpSessionListener</span>, <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default constructor. </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpSessionListener#sessionCreated(HttpSessionEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletsession被创建了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletRequestListener#requestDestroyed(ServletRequestEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletrequest被销毁了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletRequestListener#requestInitialized(ServletRequestEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletrequest被创建了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpSessionListener#sessionDestroyed(HttpSessionEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletsession被销毁了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletContextListener#contextDestroyed(ServletContextEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletcontext被销毁了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletContextListener#contextInitialized(ServletContextEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent arg0)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">&quot;servletcontext被创建了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.添加监听信息类,在web.xml文件中添加 mylistener事件监听器信息;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener&gt;</span><br><span class="line">  &lt;listener-<span class="class"><span class="keyword">class</span>&gt;</span></span><br><span class="line"><span class="class">  <span class="title">chapter11</span>.<span class="title">listener</span>.<span class="title">mylistener</span></span></span><br><span class="line"><span class="class">  &lt;/<span class="title">listener</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.设置监听超时信息;<br>在web.xml文件中设置session的超时时间为2min</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;session-config&gt;</span><br><span class="line">  &lt;session-timeout&gt;<span class="number">2</span>&lt;/session-timeout&gt;</span><br><span class="line">  &lt;/session-config&gt;</span><br></pre></td></tr></table></figure><h1 id="2-创建测试页面"><a href="#2-创建测试页面" class="headerlink" title="2.创建测试页面:"></a>2.创建测试页面:</h1><p>在chepter11中新建一个testattribute.jsp用来观察属性事件监听器的作用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">**&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html xmlns=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;这是个测试对象属性信息监听器的页面&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">getServletContext().setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">getServletContext().setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">getServletContext().removeAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">session.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">session.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">session.removeAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itcast&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itheima&quot;</span>);</span><br><span class="line">request.removeAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;**</span><br></pre></td></tr></table></figure><p>创建监听器,在chapter11.listener里创建myattributelistener.java的监听类;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter11.listener;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextAttributeEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextAttributeListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestAttributeEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequestAttributeListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionAttributeListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingEvent;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Application Lifecycle Listener implementation class myattributelistener</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">myattributelistener</span> <span class="keyword">implements</span> <span class="title">ServletContextAttributeListener</span>, <span class="title">HttpSessionAttributeListener</span>, <span class="title">ServletRequestAttributeListener</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default constructor. </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">myattributelistener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletContextAttributeListener#attributeAdded(ServletContextAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(ServletContextAttributeEvent sae)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sae.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletcontext添加属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+sae.getServletContext().getAttribute(name));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletContextAttributeListener#attributeRemoved(ServletContextAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(ServletContextAttributeEvent sae)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sae.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletcontext移除属性:&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletRequestAttributeListener#attributeRemoved(ServletRequestAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(ServletRequestAttributeEvent sra)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sra.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletrequest移除属性&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletRequestAttributeListener#attributeAdded(ServletRequestAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(ServletRequestAttributeEvent sra)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sra.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletrequest添加属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+sra.getServletRequest().getAttribute(name));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletRequestAttributeListener#attributeReplaced(ServletRequestAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(ServletRequestAttributeEvent sra)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sra.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletrequest替换属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+sra.getServletRequest().getAttribute(name));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpSessionAttributeListener#attributeAdded(HttpSessionBindingEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(HttpSessionBindingEvent hbe)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = hbe.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;httpsession添加属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+hbe.getSession().getAttribute(name));</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpSessionAttributeListener#attributeRemoved(HttpSessionBindingEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(HttpSessionBindingEvent hbe)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = hbe.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;httpsession移除属性:&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> HttpSessionAttributeListener#attributeReplaced(HttpSessionBindingEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(HttpSessionBindingEvent hbe)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = hbe.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;httpsession替换属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+hbe.getSession().getAttribute(name));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> ServletContextAttributeListener#attributeReplaced(ServletContextAttributeEvent)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(ServletContextAttributeEvent sea)</span>  </span>&#123; </span><br><span class="line">         <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    String name = sea.getName();</span><br><span class="line">    System.out.println(<span class="string">&quot;servletcontext替换属性:&quot;</span>+ name + <span class="string">&quot;=&quot;</span>+sea.getServletContext().getAttribute(name));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>添加监听信息,在web.xml文件中输入一下内容:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener&gt;</span><br><span class="line"> &lt;listener-<span class="class"><span class="keyword">class</span>&gt;</span></span><br><span class="line"><span class="class"> <span class="title">chapter11</span>.<span class="title">listener</span>.<span class="title">myattributelistener</span></span></span><br><span class="line"><span class="class"> &lt;/<span class="title">listener</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class"> &lt;/<span class="title">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb-08 Servlet高级</title>
      <link href="/2021/11/18/javaweb/javaweb08/"/>
      <url>/2021/11/18/javaweb/javaweb08/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-实现第一个Filter"><a href="#1-实现第一个Filter" class="headerlink" title="1.实现第一个Filter"></a>1.实现第一个Filter</h2><p>首先在Eclipse中创建一个名为chapter08的Web项目，然后在该项目的src目录下创建一个名为baixiao.filter包，<br>最后在该包下创建一个名为MyServlet的Servlet 类，该类用于访问时在浏览器中输出“Hello MyServlet”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class MyServlet extends HttpServlet &#123;</span><br><span class="line">private static final long serialVersionUID = 1L;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">response.getWriter().print(&quot;hello dashuju2004-------pidan&lt;br /&gt;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">// TODO Auto-generated method stub</span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在web.xml文件中对Servlet进行如下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">&lt;description&gt;&lt;/description&gt;</span><br><span class="line">&lt;display-name&gt;MyServlet&lt;/display-name&gt;</span><br><span class="line">&lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;servlet-class&gt;baixiao.filter.MyServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">&lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/MyServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat 服务器，在浏览器的地址栏中输入地址“<a href="http://localhost:8080/chapterO8/MyServlet%E2%80%9D">http://localhost:8080/chapterO8/MyServlet”</a></p><p>在pidan.filter包中创建一个名为MyFilter的Fiter类，该类用于拦截MyServlet程序。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class MyFilter implements Filter &#123;</span><br><span class="line"> </span><br><span class="line">public void destroy() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">System.out.println(&quot;拦截了原网站的响应&quot;);</span><br><span class="line">response.getWriter().print(&quot;这是filter输出到网页的内容&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void init(FilterConfig fConfig) throws ServletException &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>过滤器程序与Servlet程序类似，同样需要在 web.xml文件中进行配置，从而设置它所能拦截的资源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;pidan.filter.MyFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/MyServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure><p>在上述代码中，过滤器的配置信息中包含多个元素，这些元素分别具有不同的作用，具体如下。</p><blockquote><p><filter>根元素用于注册一个Filter。<br><filter-name>子元素用于设置Filter名称。<br><filter-class>子元素用于设置Filter类的完整名称。<br><filter-mapping>根元素用于设置一个过滤器所拦截的资源。<br><filter-name>子元素必须与<filter>中的<filter-name>子元素相同。<br><url-pattern>子元素用于匹配用户请求的URL,例如“/MyServlet”，这个URL还可以使用通配符“<em>”来表示，例如“</em>.do”适用于所有以“.do”结尾的Servlet路径。</p></blockquote><p>重新启动Tomcat 服务器，在浏览器访问MyServlet</p><h2 id="2-Filter映射"><a href="#2-Filter映射" class="headerlink" title="2.Filter映射"></a>2.Filter映射</h2><p>2.1拦截不同方式的访问请求<br>    在web.xml文件中，一个<filter-mapping>元素用于配置一个Fiter所负责拦截的资源。<br><filter-mapping>元素中有一个特殊的子元素<dispatcher>,该元素用于指定过滤器所拦截的资源被Servlet容器调用的方式，、<br><dispatcher>元素的值共有4个：</p><blockquote><p>REQUEST<br>当用户直接访问页面时，Web容器将会调用过滤器。如果目标资源是通过RequestDispatcher的include()或 forward()方法访问的，那么该过滤器将不会被调用。<br>INCLUDE<br>如果目标资源是通过RequestDispatcher的 include()方法访问的，那么该过滤器将被调用。<br>除此之外，该过滤器不会被调用。<br>FORWARD<br>如果目标资源是通过RequestDispatcher的forward()方法访问的，那么该过滤器将被调用。<br>除此之外，该过滤器不会被调用。<br>ERROR<br>如果目标资源是通过声明式异常处理机制调用的，那么该过滤器将被调用。除此之外，过滤器不会被调用。</p></blockquote><p>在chapter08项目的baixiao.filter包中，<br>创建一个名为ForwardServlet的Servlet类，该类用于将请求转发给first.jsp页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class ForwardServlet extends HttpServlet &#123;</span><br><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">request.getRequestDispatcher(&quot;/first.jsp&quot;).forward(request,response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在web.xml文件中，配置ForwardServlet信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">&lt;servlet-name&gt;ForwardServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;servlet-class&gt;baixiao.filter.ForwardServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">&lt;servlet-name&gt;ForwardServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/ForwardServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure><p>在WebContent目录中创建一个first.jsp页面，该页面用于输出内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">first.jsp</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>在baixiao.filter包中，创建一个过滤器ForwardFiter.java,该过滤器专门用于对first.jsp页面进行拦截</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"> </span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line"> </span><br><span class="line">public class ForwardFilter implements Filter &#123;</span><br><span class="line"> </span><br><span class="line">public void destroy() &#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">PrintWriter out=response.getWriter();</span><br><span class="line">out.write(&quot;Hello FilterYest&quot;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void init(FilterConfig fConfig) throws ServletException &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在web.xml文件中，配置过滤器的映射信息，拦截first.jsp页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;ForwardFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;baixiao.filter.ForwardFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;ForwardFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/first.jsp&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat 服务器，在浏览器访问ForwardServlet</p><p>浏览器可以正常访问JSP页面，说明ForwardFilter没有拦截到ForwardServlet转发的first.jsp页面。<br>为了拦截ForwardServlet通过forward(）方法转发的first.jsp页面，需要在web.xml文件中的对应过滤器配置信息中增加一个<dispatcher>子元素，将该元素的值设置为FORWARD</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;ForwardFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;baixiao.filter.ForwardFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;ForwardFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/first.jsp&lt;/url-pattern&gt;</span><br><span class="line">&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure><p>浏览器窗口显示的是ForwardFilter类中的内容，而first.jsp页面的输出内容没有显示。<br>由此可见,ForwardServlet中通过 forward()方法转发的 first.jsp页面被成功拦截了。</p><h2 id="3-Filter链"><a href="#3-Filter链" class="headerlink" title="3.Filter链"></a>3.Filter链</h2><p>3.1 在 chapter08 项目的pidan.filter 包中新建两个过滤器 MyFilter01 和MyFilter02</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"> </span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line"> </span><br><span class="line">public class MyFilter01 implements Filter &#123;</span><br><span class="line"> </span><br><span class="line">   </span><br><span class="line">public void destroy() &#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">PrintWriter out=response.getWriter();</span><br><span class="line">out.write(&quot;Hello MyFilter01&lt;br /&gt;&quot;);</span><br><span class="line">chain.doFilter(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void init(FilterConfig fConfig) throws ServletException &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.filter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter02</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">PrintWriter out=response.getWriter();</span><br><span class="line">out.write(<span class="string">&quot;MyFilter02 Before&lt;br /&gt;&quot;</span>);</span><br><span class="line">chain.doFilter(request, response);</span><br><span class="line">out.write(<span class="string">&quot;MyFilter02 After&lt;br /&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了防止其他过滤器影响此次Filter链的演示效果，请先在web.xml文件中注释掉其他过滤器的配置信息。<br>然后，将MyFilter01和MyFilter02过滤器的映射信息配置在MyServlet配置信息前面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter01&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;pidan.filter.MyFilter01&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter01&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/MyServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter02&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;baixiao.filter.MyFilter02&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter02&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/MyServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure><p>MyServlet首先被MyFilter01拦截了，打印出MyFilter01中的内容，然后被MyFilter02拦截，<br>直到MyServlet被MyFilterO2放行后，浏览器才显示出MyServlet中的输出内容。 </p><h2 id="4-FilterConfig接口"><a href="#4-FilterConfig接口" class="headerlink" title="4.FilterConfig接口"></a>4.FilterConfig接口</h2><p>在 chapter08项目的baixiao.filter包中创建过滤器MyFilter03,来获取 web.xml中设置的参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">public class MyFilter03 implements Filter &#123;</span><br><span class="line">private String characterEncoding;</span><br><span class="line">FilterConfig fc;</span><br><span class="line"> </span><br><span class="line">public void destroy() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">characterEncoding=fc.getInitParameter(&quot;encoding&quot;);</span><br><span class="line">System.out.println(&quot;encoding 初始化参数的值为：&quot;+characterEncoding);</span><br><span class="line">chain.doFilter(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void init(FilterConfig fConfig) throws ServletException &#123;</span><br><span class="line">this.fc=fConfig;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 web.xml文件中配置过滤器信息。由于Filter链中各个Filter的拦截顺序与它们在web.xml文件中<fiter-mapping>元素的映射顺序一致，<br>因此,为了防止其他Filter影响MyFilter03的拦截效果，这里将MyFilter03映射信息配置在web.xml文件最前端</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter03&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;baixiao.filter.MyFilter03&lt;/filter-class&gt;</span><br><span class="line">&lt;init-param&gt;</span><br><span class="line">&lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">&lt;param-value&gt;GBK&lt;/param-value&gt;</span><br><span class="line">&lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;MyFilter03&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/MyServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure><p>使用Filter获取到了配置文件中的初始化参数。当Tomcat服务器启动时，会加载所有的Web应用，<br>当加载到chapter08这个Web应用时，MyFiter03就会被初始化调用 init()方法，从而可以得到FilterConfig 对象。<br>然后在doFilter()方法中通过调用FilterConfig对象的qetlnitParameter()方法便可以获取在web.xml文件中配置的某个参数信息。</p><h2 id="5-任务——使用Filter实现用户自动登录"><a href="#5-任务——使用Filter实现用户自动登录" class="headerlink" title="5.任务——使用Filter实现用户自动登录"></a>5.任务——使用Filter实现用户自动登录</h2><p>5.1 编写User类<br>   在chapter08项目中创建baixiao.entity包，在该包中编写User 类，该类用于封装用户的信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.entity;</span><br><span class="line"> </span><br><span class="line">public class User &#123;</span><br><span class="line">private String username;</span><br><span class="line">private String password;</span><br><span class="line">public String getUsername() &#123;</span><br><span class="line">return username;</span><br><span class="line">&#125;</span><br><span class="line">public void setUsername(String username) &#123;</span><br><span class="line">this.username = username;</span><br><span class="line">&#125;</span><br><span class="line">public String getPassword() &#123;</span><br><span class="line">return password;</span><br><span class="line">&#125;</span><br><span class="line">public void setPassword(String password) &#123;</span><br><span class="line">this.password = password;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.2 实现登录页面和首页<br>(1).在chapter08项目的WebContent根目录中，编写login.jsp页面，该页面用于创建一个用户登录的表单，<br>这个表单需要填写用户名和密码，以及用户自动登录的时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;</span><br><span class="line">pageEncoding=&quot;utf-8&quot; import=&quot;java.util.*&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;/head&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">&lt;h3&gt;用户登录&lt;/h3&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;body style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">&lt;form action=&quot;$&#123;pageContext.request.contextPath &#125;/LoginServlet&quot;</span><br><span class="line">method=&quot;post&quot;&gt;</span><br><span class="line">&lt;table border=&quot;1&quot; width=&quot;600px&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot;</span><br><span class="line">align=&quot;center&quot;&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td height=&quot;30&quot; align=&quot;center&quot;&gt;用户名：&lt;/td&gt;</span><br><span class="line">&lt;td&gt;&amp;nbsp;&amp;nbsp; &lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;$&#123;errorMsg &#125;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td height=&quot;30&quot; align=&quot;center&quot;&gt;密 &amp;nbsp; 码：&lt;/td&gt;</span><br><span class="line">&lt;td&gt;&amp;nbsp;&amp;nbsp; &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td height=&quot;35&quot; align=&quot;center&quot;&gt;自动登录时间&lt;/td&gt;</span><br><span class="line">&lt;td&gt;&lt;input type=&quot;radio&quot; name=&quot;autologin&quot;</span><br><span class="line">value=&quot;$&#123;60*60*24*31 &#125;&quot; /&gt;一个月 &lt;input type=&quot;radio&quot; name=&quot;autologin&quot;</span><br><span class="line">value=&quot;$&#123;60*60*24*31*3 &#125;&quot; /&gt;三个月 &lt;input type=&quot;radio&quot;</span><br><span class="line">name=&quot;autologin&quot; value=&quot;$&#123;60*60*24*31*6 &#125;&quot; /&gt;半年 &lt;input</span><br><span class="line">type=&quot;radio&quot; name=&quot;autologin&quot; value=&quot;$&#123;60*60*24*31*12 &#125;&quot; /&gt;一年&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td height=&quot;30&quot; colspan=&quot;2&quot; align=&quot;center&quot;&gt;&lt;input type=&quot;submit&quot;</span><br><span class="line">value=&quot;登录&quot; /&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;input type=&quot;reset&quot;</span><br><span class="line">value=&quot;重置&quot; /&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;html&gt;</span><br></pre></td></tr></table></figure><p>(2).在chapter08项目的WebContent根目录中，编写index.jsp页面，该页面用于显示用户的登录信息。<br>如果没有用户登录，在index.jsp页面中就显示一个用户登录的超链接。如果用户已经登录，在 index.isp页面中显示登录的用户名，以及一个注销的超链接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;</span><br><span class="line">pageEncoding=&quot;utf-8&quot; import=&quot;java.util.*&quot;%&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;显示登录的用户信息&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">&lt;h3&gt;欢迎光临&lt;/h3&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;sessionScope.user==null &#125;&quot;&gt;</span><br><span class="line">&lt;a href=&quot;http://localhost:9999/chap08/login.jsp&quot;&gt;用户登录&lt;/a&gt;</span><br><span class="line">&lt;/c:when&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">欢迎您：$&#123;sessionScope.user.username&#125;    &lt;a</span><br><span class="line">href=&quot;http://localhost:9999/chap08/LogoutServlet&quot;&gt;退出&lt;/a&gt;</span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;hr /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>6.创建Servlet<br>(1)编写LoginServlet类<br>在chapter08项目的baixiaon.filter包中，编写LoginServlet类，该类用于处理用户的登录请求。<br>如果输入的用户名和密码正确，则发送一个用户自动登录的Cookie，并跳转到首页；否则会提示输入的用户名或密码错误，<br>并跳转至登录页面login.jsp让用户重新登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.Cookie;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line">import pidan.entity.User;</span><br><span class="line"> </span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line"> </span><br><span class="line">    public LoginServlet() &#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">String username = request.getParameter(&quot;username&quot;);</span><br><span class="line">String password = request.getParameter(&quot;password&quot;);</span><br><span class="line">if (&quot;pidan&quot;.equals(username) &amp;&amp; &quot;666666&quot;.equals(password)) &#123;</span><br><span class="line">User user = new User();</span><br><span class="line">user.setUsername(username);</span><br><span class="line">user.setPassword(password);</span><br><span class="line">request.getSession().setAttribute(&quot;user&quot;, user);</span><br><span class="line">String autoLogin = request.getParameter(&quot;autoLogin&quot;);</span><br><span class="line">if (autoLogin != null) &#123;</span><br><span class="line">Cookie cookie = new Cookie(autoLogin, username + &quot;-&quot;+password);</span><br><span class="line">cookie.setMaxAge(Integer.parseInt(autoLogin));</span><br><span class="line">cookie.setPath(request.getContextPath());</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">&#125;</span><br><span class="line">response.sendRedirect(request.getContextPath()+&quot;/index.jsp&quot;);</span><br><span class="line">&#125;else &#123;</span><br><span class="line">request.setAttribute(&quot;errerMsg&quot;, &quot;用户名或密码错误&quot;);</span><br><span class="line">request.getRequestDispatcher(&quot;/login.jsp&quot;).forward(request, response);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7.创建过滤器<br>在chapter08项目的baixiao.filter包中，编写AutoLoginFilter类，该类用于拦截用户登录的访问请求，<br>判断请求中是否包含用户自动登录的Cookie。<br>如果包含，则获取Cookie中的用户名和密码，并验证用户名和密码是否正确。如果正确，则将用户的登录信息封装到User对象存入Session域中，完成用户自动登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package baixiao.filter;</span><br><span class="line"> </span><br><span class="line">import java.io.IOException;</span><br><span class="line">import javax.servlet.Filter;</span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.FilterConfig;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.ServletRequest;</span><br><span class="line">import javax.servlet.ServletResponse;</span><br><span class="line">import javax.servlet.annotation.WebFilter;</span><br><span class="line">import javax.servlet.http.Cookie;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line"> </span><br><span class="line">import baixiao.entity.User;</span><br><span class="line"> </span><br><span class="line">public class AutoLoginFilter implements Filter &#123;</span><br><span class="line"> </span><br><span class="line">public void destroy() &#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void doFilter(ServletRequest req, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">HttpServletRequest request = (HttpServletRequest) req;</span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line">String autologin = null;</span><br><span class="line">for (int i = 0; cookies != null &amp;&amp; i&lt;cookies.length;i++) &#123;</span><br><span class="line">if (&quot;autologin&quot;.equals(cookies[i].getValue())) &#123;</span><br><span class="line">autologin = cookies[i].getValue();</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if (autologin != null) &#123;</span><br><span class="line">String[] parts = autologin.split(&quot;-&quot;);</span><br><span class="line">String username = parts[0];</span><br><span class="line">String password = parts[1];</span><br><span class="line">if (&quot;pidan&quot;.equals(username)&amp;&amp;(&quot;666666&quot;).equals(password)) &#123;</span><br><span class="line">User user = new User();</span><br><span class="line">user.setUsername(username);</span><br><span class="line">user.setPassword(password);</span><br><span class="line">request.getSession().setAttribute(&quot;user&quot;, user);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">chain.doFilter(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void init(FilterConfig fConfig) throws ServletException &#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8.配置映射信息<br>    在web.xml文件中，配置所有相关Servlet及AutoLoginFilter过滤器信息。<br>由于要拦截用户访问资源的所有请求，因此，将过滤器<filter-mapping>元素拦截的路径设置为“/”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">&lt;filter-name&gt;AutoLoginFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;filter-class&gt;baixiao.filter.AutoLoginFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">&lt;filter-name&gt;AutoLoginFilter&lt;/filter-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">&lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;servlet-class&gt;baixiao.filter.LoginServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">&lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/LoginServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">&lt;servlet-name&gt;LogoutServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;servlet-class&gt;baixiao.filter.LogouServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">&lt;servlet-name&gt;LogoutServlet&lt;/servlet-name&gt;</span><br><span class="line">&lt;url-pattern&gt;/LogoutServlet&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure><p>9.运行项目，查看结果<br>(1)访问login.jsp页面<br>重启服务器，打开IE浏览器在地址栏中输入“<a href="http://localhost:8888/chapter08/login.jsp%E2%80%9D%EF%BC%8C">http://localhost:8888/chapter08/login.jsp”，</a><br>此时，浏览器窗口中会显示一个用户登录的表单，在这个表单中输入用户名“baixiao”、密码“123456”，并选择用户自动登录的时间<br>(2)实现登录<br>    点击登录按钮，便可完成自动登录<br>(3)注销用户<br>    单击图中的【注销】超链接，就可以注销当前的用户，然后显示index.jsp页面</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb-07 EL表达式和JSTL</title>
      <link href="/2021/11/10/javaweb/javaweb07/"/>
      <url>/2021/11/10/javaweb/javaweb07/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>javaBean<br>在Eclipse中创建一个名为chapterO7的Web项目，然后在项目的src目录下创建包pidan.servlet,<br>在包中创建一个用于存储用户名和密码的类MyServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> baixiao.servlet;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class MyServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/MyServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">request.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;dashuju&quot;</span>);</span><br><span class="line"></span><br><span class="line">request.setAttribute(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">RequestDispatcher dis=request.getRequestDispatcher(<span class="string">&quot;/myjsp.jsp&quot;</span>);</span><br><span class="line">dis.forward(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;****</span><br></pre></td></tr></table></figure><p>然后，在WebContent目录下编写一个名为myjsp的JSP文件，使用该文件来输出MyServlet所存储的信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">**&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%=(String) request.getAttribute(<span class="string">&quot;username&quot;</span>) %&gt;&lt;br/&gt;</span><br><span class="line">&lt;%=(String) request.getAttribute(<span class="string">&quot;password&quot;</span>) %&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">使用EL表达式：&lt;br /&gt;</span><br><span class="line">$&#123;username&#125;&lt;br /&gt;</span><br><span class="line">$&#123;password&#125;&lt;br /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;**</span><br></pre></td></tr></table></figure><p>最后，部署Web项目chapter07,启动Tomcat 服务器，在浏览器访问MyServlet页面</p><p>在项目的WebContent目录下，新建一个名为scopes.jsp的文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;% pageContext.setAttribute(<span class="string">&quot;userName&quot;</span>,<span class="string">&quot;HYS&quot;</span>); %&gt;</span><br><span class="line">&lt;% request.setAttribute(<span class="string">&quot;bookName&quot;</span>,<span class="string">&quot;dashuju2004&quot;</span>); %&gt;</span><br><span class="line">&lt;% session.setAttribute(<span class="string">&quot;userName&quot;</span>,<span class="string">&quot;Java Web&quot;</span>); %&gt;</span><br><span class="line">&lt;% application.setAttribute(<span class="string">&quot;bookName&quot;</span>, <span class="string">&quot;Java 基础&quot;</span>); %&gt;</span><br><span class="line">$&#123;pageScope.userName &#125;&lt;br /&gt;</span><br><span class="line">$&#123;requestScope.bookName &#125;&lt;br /&gt;</span><br><span class="line">$&#123;sessionScope.userName &#125;&lt;br /&gt;</span><br><span class="line">$&#123;applicationScope.bookName &#125;&lt;br /&gt;</span><br><span class="line">$&#123;userName &#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat 服务 器， 在浏览器访问scopes.jsp页面<br>在项目的WebContent目录下，新建一个名为param.jsp的文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/param.jsp&quot;</span>&gt;</span><br><span class="line">num1: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;num1&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">num2: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;num&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">num3: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;num&quot;</span>&gt;&lt;br /&gt; &lt;br /&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span>value=<span class="string">&quot;提交&quot;</span>/&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span>value=<span class="string">&quot;重置&quot;</span>/&gt;&lt;hr/&gt;</span><br><span class="line">num1: $&#123;param.num1&#125;&lt;br /&gt;</span><br><span class="line">num2: $&#123;paramValues.num[<span class="number">0</span>]&#125;&lt;br /&gt;</span><br><span class="line">num3: $&#123;paramValues.num[<span class="number">1</span>]&#125;&lt;br /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat 服务器，在浏览器访问param.jsp页面，浏览器窗口中会显示一个表单，在这个表单中输入3个数字，分别为10、20、30，然后单击【提交】按钮</p><p>在项目的WebContent目录下，新建一个名为cookie.jsp的文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;% response.addCookie(<span class="keyword">new</span> Cookie(<span class="string">&quot;uesrName&quot;</span>,<span class="string">&quot;pidan&quot;</span>)); %&gt;</span><br><span class="line">Cookie对象的信息：&lt;br /&gt;</span><br><span class="line">$&#123;cookie.userName &#125;&lt;br /&gt;</span><br><span class="line">Cookie对象的名称和值：&lt;br /&gt;</span><br><span class="line">$&#123;cookie.userName.name &#125;=$&#123;cookie.userName.value &#125;</span><br><span class="line"> </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;**</span><br></pre></td></tr></table></figure><p>启动Tomcat服务器，在浏览器访问cookie.jsp页面，由于是浏览器第1次访问cookie.jsp页面，<br>此时，服务器还没有接收到名为userName的Cookie信息，因此，浏览器窗口中不会显示 。<br>接下来刷新浏览器， 第2次访问cookie.jsp页面</p><p>在chapterO7项目的WebContent目录下创建一个名为c_out1.jsp的文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--第<span class="number">1</span>个out标签--%&gt;</span><br><span class="line">userName属性的值为：</span><br><span class="line">&lt;c:out value=<span class="string">&quot;$&#123;param.username&#125;&quot;</span> <span class="keyword">default</span>=<span class="string">&quot;unknown&quot;</span>/&gt;&lt;br /&gt;</span><br><span class="line">&lt;%--第<span class="number">2</span>个out标签--%&gt;</span><br><span class="line">userName属性的值为：</span><br><span class="line">&lt;c:out value=<span class="string">&quot;$&#123;param.username&#125;&quot;</span>&gt;</span><br><span class="line">unknown</span><br><span class="line">&lt;/c:out&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;****</span><br></pre></td></tr></table></figure><h2 id="lt-c-forEach-gt-标签"><a href="#lt-c-forEach-gt-标签" class="headerlink" title="&lt;c:forEach&gt;标签"></a>&lt;c:forEach&gt;标签</h2><blockquote><p>var属性用于指定将当前迭代到的元素保存到page域中的名称。<br>items属性用于指定将要迭代的集合对象。<br>varStatus属性用于指定当前迭代状态信息的对象保存到page域中的名称。<br>begin属性用于指定从集合中第几个元素开始进行迭代，begin的索引值从0开始。如果没有指定items属性，就从begin指定的值开始迭代，直到迭代结束为止。<br>step属性用于指定迭代的步长，即迭代因子的增量。</p></blockquote><p>在项目的WebContent目录下，创建一个名为c_foreach1.jsp的文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">**&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String[] fruits =&#123;<span class="string">&quot;apple&quot;</span>,<span class="string">&quot;orange&quot;</span>,<span class="string">&quot;grape&quot;</span>,<span class="string">&quot;banana&quot;</span>&#125;;</span><br><span class="line">request.setAttribute(<span class="string">&quot;ff&quot;</span>, fruits);</span><br><span class="line">%&gt;</span><br><span class="line">String数组中的元素：</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> items=<span class="string">&quot;&lt;%=fruits %&gt;&quot;</span>&gt;</span><br><span class="line">$&#123;name&#125;&lt;br /&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;%</span><br><span class="line">Map userMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">userMap.put(<span class="string">&quot;Tom&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">userMap.put(<span class="string">&quot;Make&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">userMap.put(<span class="string">&quot;Lina&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;map&quot;</span>, userMap);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;hr /&gt;</span><br><span class="line">HashMap集合中的元素：</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;entry&quot;</span> items=<span class="string">&quot;&lt;%=userMap %&gt;&quot;</span>&gt;</span><br><span class="line">key:$&#123;entry.key&#125;-------$&#123;entry.value&#125;&lt;br /&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;**</span><br></pre></td></tr></table></figure><p>启动Tomcat服务器，在浏览器访问c_foreach1.jsp页面<br><img src="./img/2.png"><br>在项目的WebContent目录下，创建一个名为c_foreach2.jsp的文件，该文件中使用了<br>&lt;c:forEach&gt;标签的begin、end和step属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">pageEncoding=<span class="string">&quot;UTF-8&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">colorsList集合(指定迭代范围和步长)</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;% List colorsList=<span class="keyword">new</span> ArrayList();</span><br><span class="line">colorsList.add(<span class="string">&quot;red&quot;</span>);</span><br><span class="line">colorsList.add(<span class="string">&quot;yellow&quot;</span>);</span><br><span class="line">colorsList.add(<span class="string">&quot;blue&quot;</span>);</span><br><span class="line">colorsList.add(<span class="string">&quot;green&quot;</span>);</span><br><span class="line">colorsList.add(<span class="string">&quot;black&quot;</span>);</span><br><span class="line">colorsList.add(<span class="string">&quot;gray&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;list&quot;</span>, colorsList);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;aa&quot;</span> items=<span class="string">&quot;$&#123;list &#125;&quot;</span> begin=<span class="string">&quot;0&quot;</span> end=<span class="string">&quot;5&quot;</span> step=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">$&#123;aa&#125;&amp;nbsp;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>&lt;c:forEach&gt;标签的varStatus属性用于设置一个javax.servlet.jsp.jstl.core.LoopTagStatus类型的变量，这个变量包含了从集合中取出元素的状态信息。使用&lt;c:forEach&gt;标签的varStatus属性可以获取以下信息。</p><blockquote><p>count：表示元素在集合中的序号，从1开始计数。<br>index：表示当前元素在集合中的索引，从0开始计数。<br>first：表示当前是否为集合中的第1个元素。<br>last：表示当前是否为集合中的最后一个元素。</p></blockquote><p>在项目的WebContent目录下，创建一个名为c_foreach3.jsp的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot; import=&quot;java.util.*&quot;%&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body style=&quot;text-align: center&quot;&gt;</span><br><span class="line">&lt;%</span><br><span class="line">List userList = new ArrayList();</span><br><span class="line">userList.add(&quot;Tom&quot;);</span><br><span class="line">userList.add(&quot;Make&quot;);</span><br><span class="line">userList.add(&quot;Lina&quot;);</span><br><span class="line">request.setAttribute(&quot;users&quot;,userList);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;table border=&quot;1&quot;&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;序号&lt;/td&gt;</span><br><span class="line">&lt;td&gt;索引&lt;/td&gt;</span><br><span class="line">&lt;td&gt;是否为第一个索引&lt;/td&gt;</span><br><span class="line">&lt;td&gt;是否为最后一个索引&lt;/td&gt;</span><br><span class="line">&lt;td&gt;元素的值&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;!-- varStatus属性 --&gt;</span><br><span class="line">&lt;c:forEach var=&quot;bb&quot; items=&quot;$&#123;users &#125;&quot; varStatus=&quot;vv&quot;&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;$&#123;vv.count&#125;&lt;/td&gt;</span><br><span class="line">&lt;td&gt;$&#123;vv.index&#125;&lt;/td&gt;</span><br><span class="line">&lt;td&gt;$&#123;vv.first &#125;&lt;/td&gt;</span><br><span class="line">&lt;td&gt;$&#123;vv.last &#125;&lt;/td&gt;</span><br><span class="line">&lt;td&gt;$&#123;bb &#125;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>&lt;c:url&gt;标签</p><blockquote><p>value属性用于指定构造的URL。<br>context属性用于指定导入同一个服务器下其他Web应用的名称。<br>var属性用于指定将构造的URL地址保存到域对象的属性名称。<br>scope属性用于指定将构造好的URL保存到域对象中。</p></blockquote><p>在项目的WebContent目录下新建一个名为c_url.jsp的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">使用绝对路径构造URL:&lt;br /&gt;</span><br><span class="line">&lt;c:url var=&quot;absoulateURL&quot; value=&quot;http://localhost:8888/chapter07/login.html&quot;&gt;</span><br><span class="line">&lt;c:param name=&quot;username&quot; value=&quot;张三&quot;&gt;&lt;/c:param&gt;</span><br><span class="line">&lt;c:param name=&quot;country&quot; value=&quot;中国&quot;&gt;&lt;/c:param&gt;</span><br><span class="line">&lt;/c:url&gt;</span><br><span class="line">&lt;a href=&quot;$&#123;absoulateURL &#125;&quot;&gt;绝对路径登录页面&lt;/a&gt;</span><br><span class="line">&lt;hr /&gt;</span><br><span class="line">使用相对路径:&lt;br /&gt;</span><br><span class="line">&lt;c:url var=&quot;risistURL&quot; value=&quot;login.html?username=张三&amp;country=中国&quot;&gt;&lt;/c:url&gt;</span><br><span class="line">&lt;a href=&quot;$&#123;risistURL &#125;&quot;&gt;相对路径登录页面&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>本章主要讲解了JavaBean、BeanUtils工具、EL表达式的基本语法、常见EL表达式隐式对象、JSTL的下载和使用以及JSTL常见标签库等知识。<br>通过本章的学习，读者能够了解什么是JavaBean,什么是EL表达式和JSTL,可以熟练地掌握通过BeanUtils工具访问JavaBean、EL表达式的基本语法的格式、<br>EL的常见隐式对象以及JSTL中的常见Core标签库等操作。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb-06 JSP技术</title>
      <link href="/2021/11/09/javaweb/javaweb06/"/>
      <url>/2021/11/09/javaweb/javaweb06/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-什么是jsp"><a href="#1-什么是jsp" class="headerlink" title="1.什么是jsp"></a>1.什么是jsp</h2><p>JSP全名是Java Server Pages,它是建立在Servlet规范之上的动态网页开发技术;</p><h2 id="2-jsp基本语法"><a href="#2-jsp基本语法" class="headerlink" title="2.jsp基本语法"></a>2.jsp基本语法</h2><p>JSP全名是Java Server Pages,它是建立在Servlet规范之上的动态网页开发技术;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">   定义变量或方法</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p>在chaptero6项目的WebContent目录下创建一个名称为example01.jsp的文件，在该文件中编写声明语句</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;%!</span><br><span class="line"><span class="keyword">int</span> a=<span class="number">1</span> ,b=<span class="number">2</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%!</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">String str = <span class="string">&quot;pidan&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(a+b);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(print());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat并在浏览器访问example01.jsp文件<br>JSP表达式（expression）用于将程序数据输出到客户端，它将要输出的变量或者表达式直接封装在以“&lt;%=”开头和以“%&gt;”结尾的标记中，其基本的语法格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%=a+b %&gt;&lt;br/&gt;</span><br><span class="line">&lt;%=print() %&gt;</span><br></pre></td></tr></table></figure><p>jsp注释<br>同其他各种编程语言一样，JSP也有自己的注释方式，其基本语法格式<br><code>java  &lt;%--注释信息--%&gt;</code><br>在chapterO6项目的WebContent目录下创建一个名称为example02的JSP页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- 这是一个HTML注释 --&gt;</span><br><span class="line">&lt;%--这是一个JSP注释 --%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>启动Tomcat并在浏览器访问example02.jsp文件，按F12查看源文件</p><h2 id="jsp指令"><a href="#jsp指令" class="headerlink" title="jsp指令"></a>jsp指令</h2><p>1.include指令<br>在chapterO6项目的WebContent目录下<br>创建两个JSP页面文件date.jsp和include.jsp,在clude.jsp文件中使用 include指令将date.jsp文件包含其中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(<span class="keyword">new</span> java.util.Date().toLocaleString());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;欢迎你&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">欢迎你pidan，现在的时间是：</span><br><span class="line">&lt;%@</span><br><span class="line">include file=<span class="string">&quot;date.jsp&quot;</span></span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat并在浏览器访问include.jsp文件<br><img src="https://cdn.jsdelivr.net/gh/string32/picgo/img/3CA758D67DDFBEC2A1FF312E7C80054F.JPG"></p><p>2.jsp隐式对象<br>在chapterO6项目的WebContent目录下创建一个名称为out.jsp页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line"> buffer=<span class="string">&quot;0kb&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(<span class="string">&quot;first line&lt;br /&gt;&quot;</span>);</span><br><span class="line">response.getWriter().println(<span class="string">&quot;sercond line&lt;br /&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>启动Tomcat并在浏览器访问out.jsp文件</p><p>在chapterO6项目的WebContent目录下创建一个名称为pageContext.jsp页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">HttpServletRequest req=(HttpServletRequest)pageContext.getRequest();</span><br><span class="line"></span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;req11&quot;</span>,<span class="string">&quot;pageContext&quot;</span>,pageContext.PAGE_SCOPE);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;req22&quot;</span>,<span class="string">&quot;dashuju&quot;</span>,pageContext.REQUEST_SCOPE);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;req33&quot;</span>,<span class="string">&quot;session&quot;</span>,pageContext.SESSION_SCOPE);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;req&quot;</span>,<span class="string">&quot;application&quot;</span>,pageContext.APPLICATION_SCOPE);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%=pageContext.findAttribute(<span class="string">&quot;req&quot;</span>) %&gt;</span><br><span class="line">&lt;hr /&gt;</span><br><span class="line">&lt;%=(String)req.getAttribute(<span class="string">&quot;req22&quot;</span>) %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>启动Tomcat并在浏览器访问pageContext.jsp文件</p><p>在chapterO6项目的WebContent目录下创建一个名称为exception.jsp的页面，在其中编发生异常的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="keyword">int</span> a=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> b=<span class="number">0</span>;</span><br><span class="line">%&gt;</span><br><span class="line">输出：&lt;%=a/b %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>在WebContent目录下创建一个名称为error.jsp的页面，<br>在其中获取从exception.jsp页面中传递过来的exception对象。在其page指令中要将 isErrorPage属性设置为true</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span> isErrorPage=<span class="string">&quot;true&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">输出异常信息：&lt;%=exception.getMessage() %&gt;</span><br><span class="line">&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">2020080604029HYS</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>3.动作元素<br>（1）在chapterO6项目的WebContent目录下编写两个JSP文件，分别是included.jsp和dinclude.jsp。<br>其中，dinclude.jsp 页面用于引入 included.jsp 页面。included.jsp作为被引入的文件，让它暂停5秒钟后才输出内容，这样，可以方便测试<a href="jsp:include">jsp:include</a>标签的flush属性。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%Thread.sleep(<span class="number">5000</span>); %&gt;</span><br><span class="line">included 被包含的页面</span><br><span class="line"> </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">dinclude页面用来包含其他页面</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;included.jsp&quot;</span> flush=<span class="string">&quot;true&quot;</span>&gt;&lt;/jsp:include&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>编写一个用于实现转发功能的 jspforward.jsp页面和一个用于显示当前时间的welcome.jsp页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">转发到其他页面：</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;welcome.jsp&quot;</span>&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">我是welcome文件</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="2-阶段案例：传智书城JSP页面"><a href="#2-阶段案例：传智书城JSP页面" class="headerlink" title="2.阶段案例：传智书城JSP页面"></a>2.阶段案例：传智书城JSP页面</h2><p>在chapter06项目的WebContent目录下创建一个名称为index.jsp的页面文件，该文件使<br>jsp:forword&gt;动作元素跳转到项目客户端展示的首页，其主要代码<br><code>&lt;jsp:forward page=&quot;/client/index.jsp&quot;&gt;&lt;/jsp:forward&gt;</code><br>将第1章中传智书城案例中的client文件夹复制到WebContent目录下，并将client文件夹下的所有.html文件改为.jsp文件</p><p>如果此时运行项目，并访问“<a href="http://localhost:8080/chapter06/client/index.jsp%E2%80%9D%EF%BC%8C%E4%BC%9A%E5%8F%91%E7%8E%B0%E9%A1%B5%E9%9D%A2%E4%B8%AD%E7%9A%84%E4%B8%AD%E6%96%87%E9%83%BD%E6%98%AF%E4%B9%B1%E7%A0%81%E3%80%82%E9%9C%80%E8%A6%81%E5%B0%86%E6%AF%8F%E4%B8%80%E4%B8%AAJSP%E6%96%87%E4%BB%B6%E4%B8%AD%E9%83%BD%E5%8A%A0%E4%B8%8Apage%E6%8C%87%E4%BB%A4">http://localhost:8080/chapter06/client/index.jsp”，会发现页面中的中文都是乱码。需要将每一个JSP文件中都加上page指令</a></p><figure class="highlight plaintext"><figcaption><span>page language</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageEncoding=&quot;UTF-8&quot;%&gt;</span><br></pre></td></tr></table></figure><p>此时当点击“新用户注册”链接后，所访问的链接路径是/chapternfregister.jsp,而项目中注册页面的真实路径是/chapter06/client/register.jsp,所以出现了“404错误。要解决此问题，只需在index.jsp页面文件中的链接和图片等路径前，加入“${pageContext.request.contextPath}/client/” </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/register.jsp&quot;</span>&gt;新用户注册&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>在client文件夹下创建一个名称为head.jsp的文件，将传智书城 index.jsp中顶部的代码抽取出到head.jsp中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;divhead&quot;</span>&gt;</span><br><span class="line">&lt;table cellspacing=<span class="string">&quot;0&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;headtable&quot;</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/client/images/logo.png&quot;</span> width=<span class="string">&quot;200&quot;</span> height=<span class="string">&quot;60&quot;</span> border=<span class="string">&quot;0&quot;</span> /&gt; </span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;td style=<span class="string">&quot;text-align:right&quot;</span>&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/client/images/cart.gif&quot;</span> width=<span class="string">&quot;26&quot;</span> height=<span class="string">&quot;23&quot;</span> style=<span class="string">&quot;margin-bottom:-4px&quot;</span> /&gt;&amp;nbsp;&lt;a href=<span class="string">&quot;#&quot;</span>&gt;购物车&lt;/a&gt; </span><br><span class="line">| &lt;a href=<span class="string">&quot;#&quot;</span>&gt;帮助中心&lt;/a&gt; </span><br><span class="line">| &lt;a href=<span class="string">&quot;#&quot;</span>&gt;我的帐户&lt;/a&gt;</span><br><span class="line">| &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/client/register.jsp&quot;</span>&gt;新用户注册&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>在client文件夹下创建一个名称为menu_search.jsp的文件，将传智书城index.jsp中菜单列表中的代码抽取出到menu_search.jsp中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;divmenu&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;文学&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;生活&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;计算机&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;外语&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;经管&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;励志&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;社科&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;学术&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;少儿&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;艺术&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;原版&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;科技&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;考试&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;生活百科&lt;/a&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span> style=<span class="string">&quot;color:#FFFF00&quot;</span>&gt;全部商品目录&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;divsearch&quot;</span>&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;#&quot;</span> id=<span class="string">&quot;searchform&quot;</span>&gt;</span><br><span class="line">&lt;table width=<span class="string">&quot;100%&quot;</span> border=<span class="string">&quot;0&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td style=<span class="string">&quot;text-align:right; padding-right:220px&quot;</span>&gt;</span><br><span class="line">Search </span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;textfield&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;inputtable&quot;</span> id=<span class="string">&quot;textfield&quot;</span> value=<span class="string">&quot;请输入书名&quot;</span></span><br><span class="line">onmouseover=<span class="string">&quot;this.focus();&quot;</span></span><br><span class="line">onclick=<span class="string">&quot;my_click(this, &#x27;textfield&#x27;);&quot;</span></span><br><span class="line">onBlur=<span class="string">&quot;my_blur(this, &#x27;textfield&#x27;);&quot;</span>/&gt; </span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/client/images/serchbutton.gif&quot;</span> border=<span class="string">&quot;0&quot;</span> style=<span class="string">&quot;margin-bottom:-4px&quot;</span> onclick=<span class="string">&quot;search()&quot;</span>/&gt; </span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>在client文件夹下创建一个名称为foot.jsp的文件，将传智书城 index.jsp中底部的代码抽取出到foot.jsp中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;divfoot&quot;</span>&gt;</span><br><span class="line">&lt;table width=<span class="string">&quot;100%&quot;</span> border=<span class="string">&quot;0&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span> &gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td rowspan=<span class="string">&quot;2&quot;</span> style=<span class="string">&quot;width:10%&quot;</span>&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/client/images/logo.png&quot;</span> width=<span class="string">&quot;195&quot;</span> height=<span class="string">&quot;50&quot;</span></span><br><span class="line">style=<span class="string">&quot;margin-left:175px&quot;</span> /&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;td style=<span class="string">&quot;padding-top:5px; padding-left:50px&quot;</span>&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span>&gt;</span><br><span class="line">&lt;font color=<span class="string">&quot;#747556&quot;</span>&gt;&lt;b&gt;CONTACT US&lt;/b&gt;&lt;/font&gt; </span><br><span class="line">&lt;/a&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td style=<span class="string">&quot;padding-left:50px&quot;</span>&gt;</span><br><span class="line">&lt;font color=<span class="string">&quot;#CCCCCC&quot;</span>&gt;</span><br><span class="line">&lt;b&gt;COPYRIGHT <span class="number">2015</span> &amp;copy; BookStore All Rights RESERVED.&lt;/b&gt; </span><br><span class="line">&lt;/font&gt;</span><br><span class="line">&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>使用include指令将抽取出的3个JSP页面包含在index.jsp中。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Markdown教程</title>
      <link href="/2021/11/06/Markdown%E5%AD%A6%E4%B9%A0/Markdown%E6%95%99%E7%A8%8B/"/>
      <url>/2021/11/06/Markdown%E5%AD%A6%E4%B9%A0/Markdown%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Markdown-教程"><a href="#Markdown-教程" class="headerlink" title="Markdown 教程"></a>Markdown 教程</h1><h2 id="1-使用-和-标记一级和二级biaot"><a href="#1-使用-和-标记一级和二级biaot" class="headerlink" title="1.使用=和-标记一级和二级biaot"></a>1.使用=和-标记一级和二级biaot</h2><h2 id="2-使用-号标记1-6级"><a href="#2-使用-号标记1-6级" class="headerlink" title="2.使用#号标记1-6级"></a>2.使用#号标记1-6级</h2><p>  #一级<br>  ##二级<br>  ###三级<br>  ####四级</p><h2 id="3-字体"><a href="#3-字体" class="headerlink" title="3.字体 "></a>3.字体 </h2><p><strong>加粗</strong></p><p><em>倾斜</em><br><em><strong>加粗加倾斜</strong></em><br>==高亮==<br>我是^上标^<br><del>下标</del>    (注意英文状态下)<br>分隔线  (你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线)</p><hr><p>下划线 <u>下划线</u><br>脚注：对文本的补充   [^要注明的文本]</p><h2 id="4-列表"><a href="#4-列表" class="headerlink" title="4.列表"></a>4.列表</h2><p>1.无序列表使用星号(*)、加号(+)或是减号(-)作为列表标记，这些标记后面要添加一个空格，然后再填写内容</p><p>*第一项  #+ -<br>*第二项<br>*第三项</p><p>有序列表（数字并加上 . 号）</p><p>1.第一<br>2.第二<br>3.第三</p><p>列表嵌套<br>列表嵌套只需在子列表中的选项前面添加四个空格即可：<br>1.第一项<br>    嵌套第一个<br>    第二个</p><h2 id="区块引用"><a href="#区块引用" class="headerlink" title="区块引用"></a>区块引用</h2><p>###1.Markdown 区块引用是在段落开头使用 &gt; 符号 ，然后后面紧跟一个空格符号：</p><blockquote><p>我是张三</p><blockquote><p>我是李四</p><blockquote><p>我是王五</p></blockquote></blockquote></blockquote><h2 id="区块中使用列表"><a href="#区块中使用列表" class="headerlink" title="区块中使用列表"></a>区块中使用列表</h2><p>###1。区块中使用列表实例如下</p><blockquote><p>区块中使用实例<br>1.第一项<br>+s<br>2.第二项<br>+第一项</p></blockquote><h2 id="列表中使用区块"><a href="#列表中使用区块" class="headerlink" title="列表中使用区块"></a>列表中使用区块</h2><p>###1.如果要在列表项目内放进区块，那么就需要在 &gt; 前添加四个空格的缩进。<br>*第一项<br>    &gt;markdown教程<br>    &gt;学习使我进步<br>*第二项</p><h2 id="代码块"><a href="#代码块" class="headerlink" title=" 代码块 "></a> 代码块 </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><img src="https://cdn.jsdelivr.net/gh/string32/picgo/img/20211106150916.png" alt="链接"><br><img src="https://cdn.jsdelivr.net/gh/string32/picgo/img/20211106151120.png" alt="高级链接"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb-05 会话及其会话技术</title>
      <link href="/2021/11/06/javaweb/javaweb05/"/>
      <url>/2021/11/06/javaweb/javaweb05/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="JavaWeb-05-会话及其会话技术"><a href="#JavaWeb-05-会话及其会话技术" class="headerlink" title="JavaWeb-05 会话及其会话技术"></a>JavaWeb-05 会话及其会话技术</h1><h2 id="实例：显示用户上次访问时间"><a href="#实例：显示用户上次访问时间" class="headerlink" title="实例：显示用户上次访问时间"></a>实例：显示用户上次访问时间</h2><p>###1.创建Servlet<br>在Eclipse中新建Web项目chapter05,并在该项目下新建一个名称为pidan.cookie.example的包，在该包中编写一个名称为LastAccessServlet的Servlet类，用于实现获取 Cookie信息并将当前时间作为Cookie 值发送给客户端。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.cookie.example;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class LastAccessServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LastAccessServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LastAccessServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">Cookie[] cookies=request.getCookies();</span><br><span class="line"></span><br><span class="line">String lastTime=<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;cookies!=<span class="keyword">null</span>&amp;&amp;i&lt;cookies.length;i++) &#123;</span><br><span class="line">String name=cookies[i].getName();</span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;lastccess&quot;</span>.equals(name)) &#123;</span><br><span class="line">lastTime=cookies[i].getValue();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(lastTime==<span class="keyword">null</span>) &#123;</span><br><span class="line">response.getWriter().print(<span class="string">&quot;第一次访问本网站！&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">response.getWriter().print(<span class="string">&quot;上次访问的时间是：&quot;</span>+lastTime);</span><br><span class="line">response.getWriter().print(<span class="string">&quot;学号：2020080604029&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">String time=String.format(<span class="string">&quot;%tF%&lt;tT&quot;</span>, <span class="keyword">new</span> Date());</span><br><span class="line">Cookie cookie=<span class="keyword">new</span> Cookie(<span class="string">&quot;lastccess&quot;</span>, time);</span><br><span class="line">Cookie cookie1 = <span class="keyword">new</span> Cookie(<span class="string">&quot;dashuju&quot;</span>, <span class="string">&quot;2004&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">response.addCookie(cookie1);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于这里直接通过 @WebServlet 标签配置URL映射,不再需要从 web.xml 里面配置 servlet。</p><p>启动Tomcat 服务器，在浏览器的地址栏中输入 localhost:8080/chapter05/LastAccessServlet”访问 LastAccessServlet,由于是第一次访问LastAccessServlet：</p><p>重新访问地址（刷新页面）：<br><img src="https://cdn.jsdelivr.net/gh/string32/picgo/img/2.png"></p><h2 id="实例：实现购物车"><a href="#实例：实现购物车" class="headerlink" title="实例：实现购物车"></a>实例：实现购物车</h2><p>1.新建一个名称为pidan.session.example01的包,在该包中创建一个名称为Book的类，该类用于封装图书的信息，<br>其中定义了id和name属性，分别用来表示书的编号和名称。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example01;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">(String id, String name)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>###2.在pidan.session.example01包中创建一个名称为BookDB的类，该类用于模拟保存所有图书的数据库。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example01;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDB</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Book&gt; map = <span class="keyword">new</span> LinkedHashMap&lt;String,Book&gt;();</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">map.put(<span class="string">&quot;1&quot;</span>, <span class="keyword">new</span> Book(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;javaWeb&quot;</span>));</span><br><span class="line">map.put(<span class="string">&quot;2&quot;</span>, <span class="keyword">new</span> Book(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;jdbc入门&quot;</span>));</span><br><span class="line">map.put(<span class="string">&quot;3&quot;</span>, <span class="keyword">new</span> Book(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;java基础&quot;</span>));</span><br><span class="line">map.put(<span class="string">&quot;4&quot;</span>, <span class="keyword">new</span> Book(<span class="string">&quot;4&quot;</span>,<span class="string">&quot;struts框架&quot;</span>));</span><br><span class="line">map.put(<span class="string">&quot;5&quot;</span>, <span class="keyword">new</span> Book(<span class="string">&quot;5&quot;</span>,<span class="string">&quot;hibernate框架&quot;</span>));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1.得到所有图书</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Collection&lt;Book&gt; <span class="title">getAll</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> map.values();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.根据map的key，也就是图书的id,得到某本图书</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Book <span class="title">getBook</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> map.get(id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>###3.创建一个名称为ListBookServlet的Servlet类，<br>该Servlet用于显示所有可购买图书的列表，通过单击“购买”链接，便可将指定的图书添加到购物车中。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example01;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class BookDB</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ListBookServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListBookServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="comment">//1,</span></span><br><span class="line">Collection &lt;Book&gt; books= BookDB.getAll();</span><br><span class="line"></span><br><span class="line">PrintWriter out=response.getWriter();</span><br><span class="line"></span><br><span class="line">out.print(<span class="string">&quot;本网站售卖的书籍：&quot;</span>+<span class="string">&quot;&lt;br/&gt;&lt;br/&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(Book b:books) &#123;</span><br><span class="line">String name= b.getName();</span><br><span class="line">String id=b.getId();</span><br><span class="line">String url=<span class="string">&quot;&lt;a href=&#x27;purcharse?id=&quot;</span>+id+<span class="string">&quot;&#x27;&gt;点击购买&lt;/a&gt;&quot;</span>;</span><br><span class="line">out.print(<span class="string">&quot;图书名称： &quot;</span>+name+<span class="string">&quot;  &quot;</span>+url+<span class="string">&quot;&lt;br/&gt;&lt;br/&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>###4.创建一个名称为PurchaseServlet的Servlet类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example01;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@WebServlet(&quot;/purcharse&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">purcharseServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">String id=request.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;id :&quot;</span>+id);</span><br><span class="line"><span class="keyword">if</span>(id==<span class="keyword">null</span>) &#123;</span><br><span class="line">response.sendRedirect(<span class="string">&quot;list&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">Book book=BookDB.getBook(id);</span><br><span class="line">HttpSession session=request.getSession();<span class="comment">//获得内存区域</span></span><br><span class="line">List&lt;Book&gt; list=(List&lt;Book&gt;)session.getAttribute(<span class="string">&quot;cart&quot;</span>);<span class="comment">//获得购物车</span></span><br><span class="line"><span class="keyword">if</span>(list==<span class="keyword">null</span>) &#123;<span class="comment">//首次购买</span></span><br><span class="line">list =<span class="keyword">new</span> ArrayList&lt;Book&gt;();</span><br><span class="line">session.setAttribute(<span class="string">&quot;cart&quot;</span>, list);</span><br><span class="line">&#125;</span><br><span class="line">list.add(book);</span><br><span class="line">Cookie cookie =<span class="keyword">new</span> Cookie(<span class="string">&quot;JESSIONID&quot;</span>, session.getId());</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">response.sendRedirect(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>###5.创建一个名称为CartServlet的Servlet类，该类主要用于展示用户已经购买的图书列表</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example01;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="meta">@WebServlet(&quot;/cart&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CartServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">PrintWriter out=response.getWriter();</span><br><span class="line">List&lt;Book&gt; cart=<span class="keyword">null</span>;</span><br><span class="line">HttpSession session = request.getSession(<span class="keyword">false</span>);</span><br><span class="line"><span class="keyword">boolean</span> cartFlag=<span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span>(session==<span class="keyword">null</span>) &#123;</span><br><span class="line">cartFlag=<span class="keyword">false</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">cart=(List&lt;Book&gt;)session.getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(cart==<span class="keyword">null</span>) &#123;</span><br><span class="line">cartFlag=<span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!cartFlag) &#123;</span><br><span class="line">out.print(<span class="string">&quot;您的购物车里面没有图书，请前往购买&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">out.print(<span class="string">&quot;购买图书如下：&quot;</span>+<span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(Book b:cart) &#123;</span><br><span class="line">out.print(<span class="comment">/*&quot;购买的图书：&quot;+*/</span>b.getName()+<span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>###6.启动Tomcat 服务器，访问ListBookServlet,<br> 1.单击图中“javaweb开发”后的“点击购买”链接<br> 2.再次访问（或点击浏览器的返回上一页）ListBookServlet，选择“jdbc开发”后的“点击购买”链接<br><img src="https://cdn.jsdelivr.net/gh/string32/picgo/img/3.png"></p><h2 id="任务：实现用户登录"><a href="#任务：实现用户登录" class="headerlink" title="任务：实现用户登录 "></a>任务：实现用户登录 </h2><p>实现效果：</p><p>用户登录的整个流程，当用户访问某个网站的首界面时，首先会判断用户是否登录，如果已经登录则在首界面中显示用户登录信息，否则进入登录页面，完成用户登录功能，然后显示用户登录信息。<br>在用户登录的情况下，如果单击用户登录界面中的“退出”时，就会注销当前用户的信息，返回首界面。</p><p>###1.创建封装用户信息类<br>1.在chapter05项目的src下新建一个名称为pidan.session.example02的包,在包中编写一个名称为User的类，<br>User类中包含username和password两个属性以及其getter和setter方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example02;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.username = username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.创建Servlet<br>在pidan.session.example02包中编写IndexServlet 类， 该Servlet 用于显示网站的首界面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example02;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@WebServlet(&quot;/IndexServlevt&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">HttpSession session= request.getSession();</span><br><span class="line">User user =(User) session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(user==<span class="keyword">null</span>) &#123;</span><br><span class="line">response.getWriter().print(<span class="string">&quot;您还没登录，请&lt;a href=&#x27;login.html&#x27;&gt;登录&lt;/a&gt;&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">response.getWriter().print(<span class="string">&quot;你已登录，欢迎你，&quot;</span>+user.getUsername()+<span class="string">&quot;!&quot;</span>);</span><br><span class="line">response.getWriter().print(<span class="string">&quot;&lt;a href=&#x27;LogoutServlet&#x27;&gt;退出&lt;/a&gt;&quot;</span>);</span><br><span class="line">Cookie cookie =<span class="keyword">new</span> Cookie(<span class="string">&quot;JSESSIONID&quot;</span>, session.getId());</span><br><span class="line">cookie.setMaxAge(<span class="number">60</span>*<span class="number">30</span>);</span><br><span class="line">cookie.setPath(<span class="string">&quot;/chapter05&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;**</span><br></pre></td></tr></table></figure><p>3.在pidan.session.example02包中编写LoginServlet,该Servlet用于显<br>示用户登录成功后的界面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example02;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">PrintWriter pw=response.getWriter();</span><br><span class="line"><span class="keyword">if</span>((<span class="string">&quot;pidan&quot;</span>).equals(username)&amp;&amp;(<span class="string">&quot;666&quot;</span>).equals(password)) &#123;</span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setUsername(username);</span><br><span class="line">user.setPassword(password);</span><br><span class="line">request.getSession().setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">response.sendRedirect(<span class="string">&quot;IndexServlevt&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">pw.write(<span class="string">&quot;用户名或密码错误，登录失败&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.在pidan.session.example02包中编写LogoutServet,该Servlet用于完<br>成用户注销功能，当用户单击【退出】时，该类会将Session对象中的用户信息移除，并跳<br>转到网站的首界面。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bai.session.example02;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@WebServlet(&quot;/LogoutServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogoutServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">request.getSession().removeAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">response.sendRedirect(<span class="string">&quot;IndexServlevt&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">doGet(request, response);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-创建登陆页面"><a href="#3-创建登陆页面" class="headerlink" title="3.创建登陆页面"></a>3.创建登陆页面</h3><p>在chapter05项目的WebContent目录下创建一个名称为login.html的页面，该页面中包含用户登录表单信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form name=<span class="string">&quot;reg&quot;</span> action=<span class="string">&quot;/chapter05/LoginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">用户名：&lt;input name=<span class="string">&quot;username&quot;</span> type=<span class="string">&quot;text&quot;</span> /&gt;&lt;br/&gt;</span><br><span class="line">密__码：&lt;input name=<span class="string">&quot;password&quot;</span> type=<span class="string">&quot;password&quot;</span> /&gt;&lt;br/&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span> id=<span class="string">&quot;bt&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>最后登录就行了</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>图片描述</title>
      <link href="/2021/11/04/%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0/%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0/"/>
      <url>/2021/11/04/%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0/%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src=""></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>javaweb 01 - 04</title>
      <link href="/2021/10/29/javaweb/javaweb1/"/>
      <url>/2021/10/29/javaweb/javaweb1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-4-博客写在csdn"><a href="#1-4-博客写在csdn" class="headerlink" title=" 1-4 博客写在csdn"></a> 1-4 博客写在csdn</h1><p>这是我的csdn链接，昵称失去梦想的仙宇 点击<a href="https://blog.csdn.net/weixin_55897821?spm=1000.2115.3001.5343">CSDN</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tomcat</title>
      <link href="/2021/10/26/javaweb/javaweb01/"/>
      <url>/2021/10/26/javaweb/javaweb01/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/06/29/hello-world/"/>
      <url>/2021/06/29/hello-world/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
